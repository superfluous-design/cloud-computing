import { Effect } from '@livestore/utils/effect';
import { InvalidPushError } from './sync.js';
// TODO proper batch validation
export const validatePushPayload = (batch, currentEventSequenceNumber) => Effect.gen(function* () {
    if (batch[0].seqNum <= currentEventSequenceNumber) {
        return yield* InvalidPushError.make({
            reason: {
                _tag: 'ServerAhead',
                minimumExpectedNum: currentEventSequenceNumber + 1,
                providedNum: batch[0].seqNum,
            },
        });
    }
});
//# sourceMappingURL=validate-push-payload.js.map