{"version":3,"file":"HttpApp.js","names":["Context","_interopRequireWildcard","require","Effect","Exit","FiberRef","Layer","Runtime","Scope","_Unify","ServerError","ServerRequest","ServerResponse","internal","internalMiddleware","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","handledSymbol","Symbol","for","toHandled","self","handleResponse","middleware","responded","withFiberRuntime","fiber","flatMap","response","request","unsafeGet","currentContext","HttpServerRequest","handler","getFiberRef","currentPreResponseHandlers","_tag","as","tap","value","withErrorHandling","catchAllCause","cause","causeResponse","zipRight","failCause","withMiddleware","unify","undefined","tracer","matchCauseEffect","onFailure","void","_cause","empty","status","onSuccess","uninterruptible","scoped","exports","appendPreResponseHandler","withPreResponseHandler","toWebHandlerRuntime","runtime","run","runFork","resolveSymbol","httpApp","toWeb","withoutBody","method","context","Promise","resolve","contextMap","Map","unsafeMap","isContext","key","httpServerRequest","fromWeb","locally","unsafeMake","signal","addEventListener","unsafeInterruptAsFork","clientAbortFiberId","once","toWebHandler","defaultRuntime","toWebHandlerLayer","layer","scope","runSync","make","close","runPromise","build","map","toRuntime","_","runner","extend","then"],"sources":["../../src/HttpApp.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}