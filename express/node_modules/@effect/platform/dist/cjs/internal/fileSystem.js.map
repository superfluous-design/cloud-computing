{"version":3,"file":"fileSystem.js","names":["Channel","_interopRequireWildcard","require","Chunk","_Context","Effect","_Function","Layer","Option","Sink","Stream","Error","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","tag","exports","GenericTag","Size","bytes","BigInt","KiB","MiB","GiB","TiB","bigint1024","bigintPiB","PiB","make","impl","of","exists","path","pipe","access","as","catchTag","reason","succeed","fail","readFileString","encoding","tryMap","readFile","try","_","TextDecoder","decode","catch","BadArgument","module","method","message","stream","options","open","flag","offset","tap","file","seek","identity","map","unwrapScoped","sink","forEach","writeAll","writeFileString","data","flatMap","TextEncoder","encode","writeFile","notFound","SystemError","pathOrDescriptor","makeNoop","fileSystem","chmod","chown","copy","copyFile","link","makeDirectory","die","makeTempDirectory","makeTempDirectoryScoped","makeTempFile","makeTempFileScoped","readDirectory","readLink","realPath","remove","void","rename","oldPath","stat","symlink","fromPath","truncate","utimes","watch","layerNoop","bufferSize","bytesToRead","bytesToRead_","chunkSize","chunkSize_","undefined","loop","totalBytesRead","toRead","readAlloc","match","onNone","onSome","buf","write","length","bufferChunks","fromChannel","capacity"],"sources":["../../../src/internal/fileSystem.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}