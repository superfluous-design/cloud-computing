{"version":3,"file":"httpServer.js","names":["Context","_interopRequireWildcard","require","Effect","_Function","Layer","Client","ClientRequest","internalEtag","internalFileSystem","internalPlatform","internalPath","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","TypeId","exports","Symbol","for","serverTag","GenericTag","serverProto","isServer","u","make","options","assign","create","serve","dual","args","isEffect","httpApp","middleware","scopedDiscard","flatMap","server","serveEffect","formatAddress","address","_tag","path","hostname","port","addressWith","effect","addressFormattedWith","logAddress","_","log","withLogAddress","layer","effectDiscard","pipe","provideMerge","makeTestClient","HttpClient","client","die","Error","host","url","succeed","mapRequest","prependUrl","layerTestClient","layerContext","mergeAll","layerWeak","layerNoop"],"sources":["../../../src/internal/httpServer.ts"],"sourcesContent":[null],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAF,uBAAA,CAAAC,OAAA;AACA,IAAAE,SAAA,GAAAF,OAAA;AACA,IAAAG,KAAA,GAAAJ,uBAAA,CAAAC,OAAA;AAGA,IAAAI,MAAA,GAAAL,uBAAA,CAAAC,OAAA;AACA,IAAAK,aAAA,GAAAN,uBAAA,CAAAC,OAAA;AAIA,IAAAM,YAAA,GAAAP,uBAAA,CAAAC,OAAA;AACA,IAAAO,kBAAA,GAAAR,uBAAA,CAAAC,OAAA;AACA,IAAAQ,gBAAA,GAAAT,uBAAA,CAAAC,OAAA;AACA,IAAAS,YAAA,GAAAV,uBAAA,CAAAC,OAAA;AAAyC,SAAAD,wBAAAW,CAAA,EAAAC,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAb,uBAAA,YAAAA,CAAAW,CAAA,EAAAC,CAAA,SAAAA,CAAA,IAAAD,CAAA,IAAAA,CAAA,CAAAK,UAAA,SAAAL,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAC,OAAA,EAAAV,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAL,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,UAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,GAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,EAAAQ,CAAA,gBAAAP,CAAA,IAAAD,CAAA,gBAAAC,CAAA,OAAAa,cAAA,CAAAC,IAAA,CAAAf,CAAA,EAAAC,CAAA,OAAAM,CAAA,IAAAD,CAAA,GAAAU,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAlB,CAAA,EAAAC,CAAA,OAAAM,CAAA,CAAAK,GAAA,IAAAL,CAAA,CAAAM,GAAA,IAAAP,CAAA,CAAAE,CAAA,EAAAP,CAAA,EAAAM,CAAA,IAAAC,CAAA,CAAAP,CAAA,IAAAD,CAAA,CAAAC,CAAA,WAAAO,CAAA,KAAAR,CAAA,EAAAC,CAAA;AAEzC;AACO,MAAMkB,MAAM,GAAAC,OAAA,CAAAD,MAAA,gBAAkBE,MAAM,CAACC,GAAG,CAAC,6BAA6B,CAAkB;AAE/F;AACO,MAAMC,SAAS,GAAAH,OAAA,CAAAG,SAAA,gBAAGnC,OAAO,CAACoC,UAAU,CAAoB,6BAA6B,CAAC;AAE7F,MAAMC,WAAW,GAAG;EAClB,CAACN,MAAM,GAAGA;CACX;AAED;AACO,MAAMO,QAAQ,GAAIC,CAAU,IAA6B,OAAOA,CAAC,KAAK,QAAQ,IAAIA,CAAC,KAAK,IAAI,IAAIR,MAAM,IAAIQ,CAAC;AAElH;AAAAP,OAAA,CAAAM,QAAA,GAAAA,QAAA;AACO,MAAME,IAAI,GACfC,OAMC,IACqBb,MAAM,CAACc,MAAM,CAACd,MAAM,CAACe,MAAM,CAACN,WAAW,CAAC,EAAEI,OAAO,CAAC;AAE1E;AAAAT,OAAA,CAAAQ,IAAA,GAAAA,IAAA;AACO,MAAMI,KAAK,GAAAZ,OAAA,CAAAY,KAAA,gBAAG,IAAAC,cAAI,EA2BtBC,IAAI,IAAK3C,MAAM,CAAC4C,QAAQ,CAACD,IAAI,CAAC,CAAC,CAAC,CAAC,EAClC,CACEE,OAA0B,EAC1BC,UAAyD,KAMzD5C,KAAK,CAAC6C,aAAa,CACjB/C,MAAM,CAACgD,OAAO,CACZhB,SAAS,EACRiB,MAAM,IAAKA,MAAM,CAACR,KAAK,CAACI,OAAO,EAAEC,UAAW,CAAC,CAC/C,CACK,CACX;AAED;AACO,MAAMI,WAAW,GAAArB,OAAA,CAAAqB,WAAA,gBAAG,IAAAR,cAAI,EA+B5BC,IAAI,IAAK3C,MAAM,CAAC4C,QAAQ,CAACD,IAAI,CAAC,CAAC,CAAC,CAAC,EACjC,CACCE,OAA0B,EAC1BC,UAAwD,KAMxD9C,MAAM,CAACgD,OAAO,CACZhB,SAAS,EACRiB,MAAM,IAAKA,MAAM,CAACR,KAAK,CAACI,OAAO,EAAEC,UAAU,CAAC,CACtC,CACZ;AAED;AACO,MAAMK,aAAa,GAAIC,OAAuB,IAAY;EAC/D,QAAQA,OAAO,CAACC,IAAI;IAClB,KAAK,aAAa;MAChB,OAAO,UAAUD,OAAO,CAACE,IAAI,EAAE;IACjC,KAAK,YAAY;MACf,OAAO,UAAUF,OAAO,CAACG,QAAQ,IAAIH,OAAO,CAACI,IAAI,EAAE;EACvD;AACF,CAAC;AAED;AAAA3B,OAAA,CAAAsB,aAAA,GAAAA,aAAA;AACO,MAAMM,WAAW,GACtBC,MAA2D,IAE3D1D,MAAM,CAACgD,OAAO,CACZhB,SAAS,EACRiB,MAAM,IAAKS,MAAM,CAACT,MAAM,CAACG,OAAO,CAAC,CACnC;AAEH;AAAAvB,OAAA,CAAA4B,WAAA,GAAAA,WAAA;AACO,MAAME,oBAAoB,GAC/BD,MAAmD,IAEnD1D,MAAM,CAACgD,OAAO,CACZhB,SAAS,EACRiB,MAAM,IAAKS,MAAM,CAACP,aAAa,CAACF,MAAM,CAACG,OAAO,CAAC,CAAC,CAClD;AAEH;AAAAvB,OAAA,CAAA8B,oBAAA,GAAAA,oBAAA;AACO,MAAMC,UAAU,GAAA/B,OAAA,CAAA+B,UAAA,gBAAkDD,oBAAoB,CAAEE,CAAC,IAC9F7D,MAAM,CAAC8D,GAAG,CAAC,gBAAgBD,CAAC,EAAE,CAAC,CAChC;AAED;AACO,MAAME,cAAc,GACzBC,KAA2B,IAE3B9D,KAAK,CAAC+D,aAAa,CAACL,UAAU,CAAC,CAACM,IAAI,CAClChE,KAAK,CAACiE,YAAY,CAACH,KAAK,CAAC,CAC1B;AAEH;AAAAnC,OAAA,CAAAkC,cAAA,GAAAA,cAAA;AACO,MAAMK,cAAc,GAAAvC,OAAA,CAAAuC,cAAA,gBAAGX,WAAW,CAAEL,OAAO,IAChDpD,MAAM,CAACgD,OAAO,CAAC7C,MAAM,CAACkE,UAAU,EAAGC,MAAM,IAAI;EAC3C,IAAIlB,OAAO,CAACC,IAAI,KAAK,aAAa,EAAE;IAClC,OAAOrD,MAAM,CAACuE,GAAG,CAAC,IAAIC,KAAK,CAAC,uDAAuD,CAAC,CAAC;EACvF;EACA,MAAMC,IAAI,GAAGrB,OAAO,CAACG,QAAQ,KAAK,SAAS,GAAG,WAAW,GAAGH,OAAO,CAACG,QAAQ;EAC5E,MAAMmB,GAAG,GAAG,UAAUD,IAAI,IAAIrB,OAAO,CAACI,IAAI,EAAE;EAC5C,OAAOxD,MAAM,CAAC2E,OAAO,CAACxE,MAAM,CAACyE,UAAU,CAACN,MAAM,EAAElE,aAAa,CAACyE,UAAU,CAACH,GAAG,CAAC,CAAC,CAAC;AACjF,CAAC,CAAC,CACH;AAED;AACO,MAAMI,eAAe,GAAAjD,OAAA,CAAAiD,eAAA,gBAAG5E,KAAK,CAACwD,MAAM,CAACvD,MAAM,CAACkE,UAAU,EAAED,cAAc,CAAC;AAE9E;AACO,MAAMW,YAAY,GAAAlD,OAAA,CAAAkD,YAAA,gBAAG7E,KAAK,CAAC8E,QAAQ,CACxCzE,gBAAgB,CAACyD,KAAK,EACtBxD,YAAY,CAACwD,KAAK,EAClB3D,YAAY,CAAC4E,SAAS,CACvB,CAACf,IAAI,cACJhE,KAAK,CAACiE,YAAY,cAAC7D,kBAAkB,CAAC4E,SAAS,CAAC,EAAE,CAAC,CAAC,CACrD","ignoreList":[]}