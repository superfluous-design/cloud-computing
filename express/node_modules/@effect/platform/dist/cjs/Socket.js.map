{"version":3,"file":"Socket.js","names":["Channel","_interopRequireWildcard","require","Context","Deferred","Effect","ExecutionStrategy","Exit","FiberRef","FiberSet","_Function","_GlobalValue","Layer","Mailbox","Predicate","Scope","_Error","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","TypeId","exports","Symbol","for","isSocket","u","hasProperty","Socket","GenericTag","CloseEventTypeId","CloseEvent","code","reason","constructor","toString","isCloseEvent","SocketErrorTypeId","isSocketError","SocketGenericError","TypeIdError","message","SocketCloseError","is","isClean","closeReason","toChannelMap","self","gen","scope","mailbox","make","writeScope","fork","sequential","write","extend","writer","emit","chunk","data","input","awaitRead","void","catchAllCause","cause","failCause","error","zipRight","close","done","runRaw","unsafeOffer","pipe","into","forkIn","interruptible","embedInput","toChannel","unwrapScoped","encoder","TextEncoder","encode","toChannelString","dual","args","encoding","decoder","TextDecoder","decode","toChannelWith","makeChannel","unwrap","map","defaultCloseCodeIsError","WebSocket","WebSocketConstructor","layerWebSocketConstructorGlobal","succeed","url","protocols","globalThis","makeWebSocket","options","fromWebSocket","acquireRelease","flatMap","ws","sync","acquire","withFiberRuntime","fiber","currentWS","latch","unsafeMakeLatch","acquireContext","currentContext","closeCodeIsError","handler","scopedWith","fiberSet","run","provideService","runtime","open","onMessage","event","Blob","promise","arrayBuffer","andThen","buffer","Uint8Array","result","isEffect","onError","removeEventListener","onClose","unsafeDone","deferred","fail","addEventListener","once","readyState","openDeferred","unsafeMake","id","await","timeoutFail","duration","openTimeout","onTimeout","raceFirst","join","catchIf","_","mapInputContext","merge","ensuring","unsafeClose","undefined","whenOpen","send","of","makeWebSocketChannel","layerWebSocket","effect","currentSendQueueCapacity","globalValue","fromTransformStream","currentStream","stream","reader","readable","getReader","addFinalizer","cancel","runFork","tryPromise","try","value","read","catch","writers","getWriter","writable","suspend"],"sources":["../../src/Socket.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}