{"version":3,"file":"RunnerServer.js","names":["RpcServer","Effect","constant","Layer","Mailbox","Option","Message","MessageStorage","Reply","Runners","Sharding","ShardingConfig","ShardManager","ShardStorage","SynchronizedClock","constVoid","void","layerHandlers","Rpcs","toLayer","gen","sharding","storage","Ping","Notify","envelope","notify","_tag","IncomingRequest","respond","lastSentReply","none","IncomingEnvelope","persisted","request","resume","replyEncoded","message","reply","flatMap","serialize","succeed","zipRight","registerReplyHandler","send","async","resume_","Stream","make","mailbox","unsafeOffer","as","Envelope","layer","spanPrefix","disableTracing","pipe","provide","layerWithClients","provideMerge","layerRpc","layerClientRpc","layerClientOnly","layerNoop","updateService","config","runnerAddress"],"sources":["../../src/RunnerServer.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}