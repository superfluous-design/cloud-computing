{"version":3,"file":"shardManager.js","names":["Arr","_interopRequireWildcard","require","Clock","Effect","_Function","MutableHashMap","MutableHashSet","Option","Order","_RunnerHealth","_ShardId","_ShardStorage","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","State","runners","shards","fromStorage","fnUntraced","numberOfShards","storage","ShardStorage","runnerHealth","RunnerHealth","storedRunners","getRunners","storedAssignments","getAssignments","deadRunners","empty","aliveRunners","forEach","address","runner","map","isAlive","push","concurrency","discard","length","logWarning","assignedShards","Map","invalidAssignments","shard","isSome","value","now","currentTimeMillis","runnerState","RunnerWithMetadata","registeredAt","shardState","shardId","ShardId","make","fromNullable","constructor","maxVersion","size","none","version","undefined","meta","some","allRunnersHaveVersion","pipe","max","every","runnerVersions","getOrElse","constFalse","shardsPerRunner","isEmpty","_","Set","isNone","shardIds","getOrUndefined","add","averageShardsPerRunner","runnerCount","unassignedShards","exports","decideAssignmentsForUnassignedShards","state","pickNewRunners","allocationOrder","combine","mapInput","number","decideAssignmentsForUnbalancedShards","rate","extraShardsToAllocate","extraShards","Math","takeRandom","maybeAddress","Number","MIN_SAFE_INTEGER","match","onNone","onSome","sortedShardsToRebalance","sort","shardsToRebalance","immediate","maybeMaxVersion","addressAssignments","unassignments","changes","candidate","candidateShards","maybeRunnerMeta","runnerMeta","assignmentCount","oldRunner","toString","oldShards","modifyAt","delete","self","array","Array","from","currentIndex","randomIndex","floor","random","swap","slice","j","tmp"],"sources":["../../../src/internal/shardManager.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}