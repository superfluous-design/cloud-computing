{"version":3,"file":"RunnerServer.js","names":["RpcServer","_interopRequireWildcard","require","Effect","_Function","Layer","Mailbox","Option","Message","MessageStorage","Reply","Runners","Sharding","_ShardingConfig","ShardManager","ShardStorage","SynchronizedClock","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","constVoid","constant","void","layerHandlers","exports","Rpcs","toLayer","gen","sharding","storage","Ping","Notify","envelope","notify","_tag","IncomingRequest","respond","lastSentReply","none","IncomingEnvelope","persisted","request","resume","replyEncoded","message","reply","flatMap","serialize","succeed","zipRight","registerReplyHandler","send","async","resume_","Stream","make","mailbox","unsafeOffer","as","Envelope","layer","spanPrefix","disableTracing","pipe","provide","layerWithClients","provideMerge","layerRpc","layerClientRpc","layerClientOnly","layerNoop","updateService","ShardingConfig","config","runnerAddress"],"sources":["../../src/RunnerServer.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}