{"version":3,"file":"prompt.js","names":["Terminal","_interopRequireWildcard","require","Doc","Effect","Effectable","_Function","Pipeable","Ref","_action","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","PromptSymbolKey","PromptTypeId","exports","Symbol","for","proto","CommitPrototype","_Output","_","commit","run","pipe","pipeArguments","arguments","isPrompt","u","allTupled","arg","length","succeed","map","x","result","curr","flatMap","tuple","a","all","Array","isArray","entries","value","rest","slice","key","prompt","record","custom","initialState","handlers","op","create","_tag","render","process","clear","dual","self","onSuccess","terminal","makeStateRef","isEffect","make","ref","loop","action","state","msg","orDie","display","zipRight","readInput","input","Action","NextFrame","ensuring","cursorShow","style"],"sources":["../../../src/internal/prompt.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}