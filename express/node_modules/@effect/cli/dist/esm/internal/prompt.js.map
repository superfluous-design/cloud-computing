{"version":3,"file":"prompt.js","names":["Terminal","Doc","Effect","Effectable","dual","Pipeable","Ref","Action","PromptSymbolKey","PromptTypeId","Symbol","for","proto","CommitPrototype","_Output","_","commit","run","pipe","pipeArguments","arguments","isPrompt","u","allTupled","arg","length","succeed","map","x","result","i","curr","flatMap","tuple","a","all","Array","isArray","entries","Object","value","rest","slice","key","prompt","record","custom","initialState","handlers","op","create","_tag","render","process","clear","self","f","onSuccess","terminal","makeStateRef","isEffect","make","ref","loop","action","get","state","msg","orDie","display","zipRight","readInput","input","set","NextFrame","ensuring","cursorShow","style"],"sources":["../../../src/internal/prompt.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAO,KAAKA,QAAQ,MAAM,2BAA2B;AACrD,OAAO,KAAKC,GAAG,MAAM,8BAA8B;AACnD,OAAO,KAAKC,MAAM,MAAM,eAAe;AACvC,OAAO,KAAKC,UAAU,MAAM,mBAAmB;AAC/C,SAASC,IAAI,QAAQ,iBAAiB;AACtC,OAAO,KAAKC,QAAQ,MAAM,iBAAiB;AAC3C,OAAO,KAAKC,GAAG,MAAM,YAAY;AAEjC,SAASC,MAAM,QAAQ,oBAAoB;AAE3C;AACA,MAAMC,eAAe,GAAG,oBAAoB;AAE5C;AACA,OAAO,MAAMC,YAAY,gBAAwBC,MAAM,CAACC,GAAG,CACzDH,eAAe,CACO;AAExB;AACA,MAAMI,KAAK,GAAG;EACZ,GAAGT,UAAU,CAACU,eAAe;EAC7B,CAACJ,YAAY,GAAG;IACdK,OAAO,EAAGC,CAAQ,IAAKA;GACxB;EACDC,MAAMA,CAAA;IACJ,OAAOC,GAAG,CAAC,IAAW,CAAC;EACzB,CAAC;EACDC,IAAIA,CAAA;IACF,OAAOb,QAAQ,CAACc,aAAa,CAAC,IAAI,EAAEC,SAAS,CAAC;EAChD;CACD;AAmCD;AACA,OAAO,MAAMC,QAAQ,GAAIC,CAAU,IACjC,OAAOA,CAAC,KAAK,QAAQ,IAAIA,CAAC,IAAI,IAAI,IAAIb,YAAY,IAAIa,CAAC;AAEzD,MAAMC,SAAS,GAAmDC,GAAM,IAIpE;EACF,IAAIA,GAAG,CAACC,MAAM,KAAK,CAAC,EAAE;IACpB,OAAOC,OAAO,CAAC,EAAE,CAAQ;EAC3B;EACA,IAAIF,GAAG,CAACC,MAAM,KAAK,CAAC,EAAE;IACpB,OAAOE,GAAG,CAACH,GAAG,CAAC,CAAC,CAAC,EAAGI,CAAC,IAAK,CAACA,CAAC,CAAC,CAAQ;EACvC;EACA,IAAIC,MAAM,GAAGF,GAAG,CAACH,GAAG,CAAC,CAAC,CAAC,EAAGI,CAAC,IAAK,CAACA,CAAC,CAAC,CAAC;EACpC,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,GAAG,CAACC,MAAM,EAAEK,CAAC,EAAE,EAAE;IACnC,MAAMC,IAAI,GAAGP,GAAG,CAACM,CAAC,CAAC;IACnBD,MAAM,GAAGG,OAAO,CAACH,MAAM,EAAGI,KAAK,IAAKN,GAAG,CAACI,IAAI,EAAGG,CAAC,IAAK,CAAC,GAAGD,KAAK,EAAEC,CAAC,CAAC,CAAC,CAAC;EACtE;EACA,OAAOL,MAAa;AACtB,CAAC;AAED;AACA,OAAO,MAAMM,GAAG,GAEwB,SAAAA,CAAA;EACtC,IAAIf,SAAS,CAACK,MAAM,KAAK,CAAC,EAAE;IAC1B,IAAIJ,QAAQ,CAACD,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE;MAC1B,OAAOO,GAAG,CAACP,SAAS,CAAC,CAAC,CAAC,EAAGQ,CAAC,IAAK,CAACA,CAAC,CAAC,CAAQ;IAC7C,CAAC,MAAM,IAAIQ,KAAK,CAACC,OAAO,CAACjB,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE;MACtC,OAAOG,SAAS,CAACH,SAAS,CAAC,CAAC,CAAC,CAAQ;IACvC,CAAC,MAAM;MACL,MAAMkB,OAAO,GAAGC,MAAM,CAACD,OAAO,CAAClB,SAAS,CAAC,CAAC,CAAkD,CAAC;MAC7F,IAAIS,MAAM,GAAGF,GAAG,CAACW,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAGE,KAAK,KAAM;QAAE,CAACF,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGE;MAAK,CAAE,CAAC,CAAC;MACxE,IAAIF,OAAO,CAACb,MAAM,KAAK,CAAC,EAAE;QACxB,OAAOI,MAAa;MACtB;MACA,MAAMY,IAAI,GAAGH,OAAO,CAACI,KAAK,CAAC,CAAC,CAAC;MAC7B,KAAK,MAAM,CAACC,GAAG,EAAEC,MAAM,CAAC,IAAIH,IAAI,EAAE;QAChCZ,MAAM,GAAGA,MAAM,CAACX,IAAI,CAClBc,OAAO,CAAEa,MAAM,IACbD,MAAM,CAAC1B,IAAI,CAACS,GAAG,CAAEa,KAAK,KAAM;UAC1B,GAAGK,MAAM;UACT,CAACF,GAAG,GAAGH;SACR,CAAC,CAAC,CAAC,CACL,CACF;MACH;MACA,OAAOX,MAAa;IACtB;EACF;EACA,OAAON,SAAS,CAACH,SAAS,CAAC,CAAC,CAAC,CAAQ;AACvC,CAAC;AAED;AACA,OAAO,MAAM0B,MAAM,GAAGA,CACpBC,YAA4E,EAC5EC,QAA+C,KACtB;EACzB,MAAMC,EAAE,GAAGV,MAAM,CAACW,MAAM,CAACtC,KAAK,CAAC;EAC/BqC,EAAE,CAACE,IAAI,GAAG,MAAM;EAChBF,EAAE,CAACF,YAAY,GAAGA,YAAY;EAC9BE,EAAE,CAACG,MAAM,GAAGJ,QAAQ,CAACI,MAAM;EAC3BH,EAAE,CAACI,OAAO,GAAGL,QAAQ,CAACK,OAAO;EAC7BJ,EAAE,CAACK,KAAK,GAAGN,QAAQ,CAACM,KAAK;EACzB,OAAOL,EAAE;AACX,CAAC;AAED;AACA,OAAO,MAAMtB,GAAG,gBAAGvB,IAAI,CAUrB,CAAC,EAAE,CAACmD,IAAI,EAAEC,CAAC,KAAKxB,OAAO,CAACuB,IAAI,EAAGrB,CAAC,IAAKR,OAAO,CAAC8B,CAAC,CAACtB,CAAC,CAAC,CAAC,CAAC,CAAC;AAEtD;AACA,OAAO,MAAMF,OAAO,gBAAG5B,IAAI,CAUzB,CAAC,EAAE,CAACmD,IAAI,EAAEC,CAAC,KAAI;EACf,MAAMP,EAAE,GAAGV,MAAM,CAACW,MAAM,CAACtC,KAAK,CAAC;EAC/BqC,EAAE,CAACE,IAAI,GAAG,WAAW;EACrBF,EAAE,CAACL,MAAM,GAAGW,IAAI;EAChBN,EAAE,CAACQ,SAAS,GAAGD,CAAC;EAChB,OAAOP,EAAE;AACX,CAAC,CAAC;AAEF;AACA,OAAO,MAAMhC,GAAG,GACdsC,IAA2B,IAE3BrD,MAAM,CAAC8B,OAAO,CAAChC,QAAQ,CAACA,QAAQ,EAAG0D,QAAQ,IAAI;EAC7C,MAAMT,EAAE,GAAGM,IAAiB;EAC5B,QAAQN,EAAE,CAACE,IAAI;IACb,KAAK,MAAM;MAAE;QACX,MAAMQ,YAAY,GAAGzD,MAAM,CAAC0D,QAAQ,CAACX,EAAE,CAACF,YAAY,CAAC,GACjDE,EAAE,CAACF,YAAY,CAAC7B,IAAI,CAAChB,MAAM,CAAC8B,OAAO,CAAC1B,GAAG,CAACuD,IAAI,CAAC,CAAC,GAC9CvD,GAAG,CAACuD,IAAI,CAACZ,EAAE,CAACF,YAAY,CAAC;QAC7B,OAAOY,YAAY,CAACzC,IAAI,CACtBhB,MAAM,CAAC8B,OAAO,CAAE8B,GAAG,IAAI;UACrB,MAAMC,IAAI,GACRC,MAA2E,IAE3E1D,GAAG,CAAC2D,GAAG,CAACH,GAAG,CAAC,CAAC5C,IAAI,CACfhB,MAAM,CAAC8B,OAAO,CAAEkC,KAAK,IACnBjB,EAAE,CAACG,MAAM,CAACc,KAAK,EAAEF,MAAM,CAAC,CAAC9C,IAAI,CAC3BhB,MAAM,CAAC8B,OAAO,CAAEmC,GAAG,IAAKjE,MAAM,CAACkE,KAAK,CAACV,QAAQ,CAACW,OAAO,CAACF,GAAG,CAAC,CAAC,CAAC,EAC5DjE,MAAM,CAACoE,QAAQ,CAACZ,QAAQ,CAACa,SAAS,CAAC,EACnCrE,MAAM,CAAC8B,OAAO,CAAEwC,KAAK,IAAKvB,EAAE,CAACI,OAAO,CAACmB,KAAK,EAAEN,KAAK,CAAC,CAAC,EACnDhE,MAAM,CAAC8B,OAAO,CAAEgC,MAAM,IAAI;YACxB,QAAQA,MAAM,CAACb,IAAI;cACjB,KAAK,MAAM;gBAAE;kBACX,OAAOY,IAAI,CAACC,MAAM,CAAC;gBACrB;cACA,KAAK,WAAW;gBAAE;kBAChB,OAAOf,EAAE,CAACK,KAAK,CAACY,KAAK,EAAEF,MAAM,CAAC,CAAC9C,IAAI,CACjChB,MAAM,CAAC8B,OAAO,CAAEsB,KAAK,IAAKpD,MAAM,CAACkE,KAAK,CAACV,QAAQ,CAACW,OAAO,CAACf,KAAK,CAAC,CAAC,CAAC,EAChEpD,MAAM,CAACoE,QAAQ,CAAChE,GAAG,CAACmE,GAAG,CAACX,GAAG,EAAEE,MAAM,CAACE,KAAK,CAAC,CAAC,EAC3ChE,MAAM,CAACoE,QAAQ,CAACP,IAAI,CAACC,MAAM,CAAC,CAAC,CAC9B;gBACH;cACA,KAAK,QAAQ;gBAAE;kBACb,OAAOf,EAAE,CAACK,KAAK,CAACY,KAAK,EAAEF,MAAM,CAAC,CAAC9C,IAAI,CACjChB,MAAM,CAAC8B,OAAO,CAAEsB,KAAK,IAAKpD,MAAM,CAACkE,KAAK,CAACV,QAAQ,CAACW,OAAO,CAACf,KAAK,CAAC,CAAC,CAAC,EAChEpD,MAAM,CAACoE,QAAQ,CAACrB,EAAE,CAACG,MAAM,CAACc,KAAK,EAAEF,MAAM,CAAC,CAAC,EACzC9D,MAAM,CAAC8B,OAAO,CAAEmC,GAAG,IAAKjE,MAAM,CAACkE,KAAK,CAACV,QAAQ,CAACW,OAAO,CAACF,GAAG,CAAC,CAAC,CAAC,EAC5DjE,MAAM,CAACoE,QAAQ,CAACpE,MAAM,CAACwB,OAAO,CAACsC,MAAM,CAACxB,KAAK,CAAC,CAAC,CAC9C;gBACH;YACF;UACF,CAAC,CAAC,CACH,CACF,CACF;UACH,OAAOlC,GAAG,CAAC2D,GAAG,CAACH,GAAG,CAAC,CAAC5C,IAAI,CACtBhB,MAAM,CAAC8B,OAAO,CAAEkC,KAAK,IAAKH,IAAI,CAACxD,MAAM,CAACmE,SAAS,CAAC;YAAER;UAAK,CAAE,CAAC,CAAC,CAAC,CAC7D;QACH,CAAC,CAAC;QACF;QACAhE,MAAM,CAACyE,QAAQ,CAACzE,MAAM,CAACkE,KAAK,CAC1BV,QAAQ,CAACW,OAAO,CAACpE,GAAG,CAACmD,MAAM,CAACnD,GAAG,CAAC2E,UAAU,EAAE;UAAEC,KAAK,EAAE;QAAQ,CAAE,CAAC,CAAC,CAClE,CAAC,CACH;MACH;IACA,KAAK,WAAW;MAAE;QAChB,OAAO3E,MAAM,CAAC8B,OAAO,CAACf,GAAG,CAACgC,EAAE,CAACL,MAAM,CAAC,EAAGV,CAAC,IAAKjB,GAAG,CAACgC,EAAE,CAACQ,SAAS,CAACvB,CAAC,CAAC,CAAC,CAAQ;MAC3E;IACA,KAAK,SAAS;MAAE;QACd,OAAOhC,MAAM,CAACwB,OAAO,CAACuB,EAAE,CAACT,KAAK,CAAC;MACjC;EACF;AACF,CAAC,CAAC;AAEJ;AACA,OAAO,MAAMd,OAAO,GAAOc,KAAQ,IAAsB;EACvD,MAAMS,EAAE,GAAGV,MAAM,CAACW,MAAM,CAACtC,KAAK,CAAC;EAC/BqC,EAAE,CAACE,IAAI,GAAG,SAAS;EACnBF,EAAE,CAACT,KAAK,GAAGA,KAAK;EAChB,OAAOS,EAAE;AACX,CAAC","ignoreList":[]}