{"version":3,"file":"httpClient.js","names":["Cookies","_interopRequireWildcard","require","Client","Error","ClientResponse","IncomingMessage","Context","Effect","_Function","Layer","Stream","Http","Https","_nodeStream","_promises","NodeSink","_httpIncomingMessage","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","HttpAgentTypeId","exports","Symbol","for","HttpAgent","GenericTag","makeAgent","options","map","all","acquireRelease","sync","Agent","agent","destroy","http","https","makeAgentLayer","scoped","agentLayer","fromAgent","make","request","url","signal","nodeRequest","protocol","method","headers","pipe","zipRight","sendBody","body","waitForResponse","concurrent","_","ClientResponseImpl","suspend","_tag","end","waitForFinish","response","Response","formData","forEach","value","key","setHeader","tryPromise","try","pipeline","Readable","fromWeb","catch","cause","RequestError","reason","run","mapError","stream","fromWritable","async","resume","onError","fail","on","onResponse","off","succeed","once","onFinish","void","HttpIncomingMessageImpl","TypeId","constructor","source","ResponseError","status","statusCode","cachedCookies","cookies","undefined","header","Array","isArray","fromSetCookie","empty","init","globalThis","Headers","statusMessage","statusText","toWeb","toJSON","inspect","_id","layerWithoutAgent","layerMergedContext","layer","provide"],"sources":["../../../src/internal/httpClient.ts"],"sourcesContent":[null],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,uBAAA,CAAAC,OAAA;AAEA,IAAAC,MAAA,GAAAF,uBAAA,CAAAC,OAAA;AACA,IAAAE,KAAA,GAAAH,uBAAA,CAAAC,OAAA;AAEA,IAAAG,cAAA,GAAAJ,uBAAA,CAAAC,OAAA;AACA,IAAAI,eAAA,GAAAL,uBAAA,CAAAC,OAAA;AACA,IAAAK,OAAA,GAAAN,uBAAA,CAAAC,OAAA;AACA,IAAAM,MAAA,GAAAP,uBAAA,CAAAC,OAAA;AACA,IAAAO,SAAA,GAAAP,OAAA;AACA,IAAAQ,KAAA,GAAAT,uBAAA,CAAAC,OAAA;AAEA,IAAAS,MAAA,GAAAV,uBAAA,CAAAC,OAAA;AACA,IAAAU,IAAA,GAAAX,uBAAA,CAAAC,OAAA;AACA,IAAAW,KAAA,GAAAZ,uBAAA,CAAAC,OAAA;AACA,IAAAY,WAAA,GAAAZ,OAAA;AACA,IAAAa,SAAA,GAAAb,OAAA;AAEA,IAAAc,QAAA,GAAAf,uBAAA,CAAAC,OAAA;AACA,IAAAe,oBAAA,GAAAf,OAAA;AAAkE,SAAAD,wBAAAiB,CAAA,EAAAC,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAnB,uBAAA,YAAAA,CAAAiB,CAAA,EAAAC,CAAA,SAAAA,CAAA,IAAAD,CAAA,IAAAA,CAAA,CAAAK,UAAA,SAAAL,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAC,OAAA,EAAAV,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAL,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,UAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,GAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,EAAAQ,CAAA,gBAAAP,CAAA,IAAAD,CAAA,gBAAAC,CAAA,OAAAa,cAAA,CAAAC,IAAA,CAAAf,CAAA,EAAAC,CAAA,OAAAM,CAAA,IAAAD,CAAA,GAAAU,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAlB,CAAA,EAAAC,CAAA,OAAAM,CAAA,CAAAK,GAAA,IAAAL,CAAA,CAAAM,GAAA,IAAAP,CAAA,CAAAE,CAAA,EAAAP,CAAA,EAAAM,CAAA,IAAAC,CAAA,CAAAP,CAAA,IAAAD,CAAA,CAAAC,CAAA,WAAAO,CAAA,KAAAR,CAAA,EAAAC,CAAA;AAElE;AACO,MAAMkB,eAAe,GAAAC,OAAA,CAAAD,eAAA,gBAA+BE,MAAM,CAACC,GAAG,CACnE,iDAAiD,CACpB;AAE/B;AACO,MAAMC,SAAS,GAAAH,OAAA,CAAAG,SAAA,gBAAGlC,OAAO,CAACmC,UAAU,CAAuB,iDAAiD,CAAC;AAEpH;AACO,MAAMC,SAAS,GAAIC,OAA4B,IACpDpC,MAAM,CAACqC,GAAG,CACRrC,MAAM,CAACsC,GAAG,CAAC,CACTtC,MAAM,CAACuC,cAAc,CACnBvC,MAAM,CAACwC,IAAI,CAAC,MAAM,IAAIpC,IAAI,CAACqC,KAAK,CAACL,OAAO,CAAC,CAAC,EACzCM,KAAK,IAAK1C,MAAM,CAACwC,IAAI,CAAC,MAAME,KAAK,CAACC,OAAO,EAAE,CAAC,CAC9C,EACD3C,MAAM,CAACuC,cAAc,CACnBvC,MAAM,CAACwC,IAAI,CAAC,MAAM,IAAInC,KAAK,CAACoC,KAAK,CAACL,OAAO,CAAC,CAAC,EAC1CM,KAAK,IAAK1C,MAAM,CAACwC,IAAI,CAAC,MAAME,KAAK,CAACC,OAAO,EAAE,CAAC,CAC9C,CACF,CAAC,EACF,CAAC,CAACC,IAAI,EAAEC,KAAK,CAAC,MAAM;EAClB,CAAChB,eAAe,GAAGA,eAAe;EAClCe,IAAI;EACJC;CACD,CAAC,CACH;AAEH;AAAAf,OAAA,CAAAK,SAAA,GAAAA,SAAA;AACO,MAAMW,cAAc,GAAIV,OAA4B,IACzDlC,KAAK,CAAC6C,MAAM,CAACd,SAAS,EAAEE,SAAS,CAACC,OAAO,CAAC,CAAC;AAE7C;AAAAN,OAAA,CAAAgB,cAAA,GAAAA,cAAA;AACO,MAAME,UAAU,GAAAlB,OAAA,CAAAkB,UAAA,gBAAGF,cAAc,EAAE;AAE1C,MAAMG,SAAS,GAAIP,KAA2B,IAC5C/C,MAAM,CAACuD,IAAI,CAAC,CAACC,OAAO,EAAEC,GAAG,EAAEC,MAAM,KAAI;EACnC,MAAMC,WAAW,GAAGF,GAAG,CAACG,QAAQ,KAAK,QAAQ,GAC3ClD,KAAK,CAAC8C,OAAO,CAACC,GAAG,EAAE;IACjBV,KAAK,EAAEA,KAAK,CAACG,KAAK;IAClBW,MAAM,EAAEL,OAAO,CAACK,MAAM;IACtBC,OAAO,EAAEN,OAAO,CAACM,OAAO;IACxBJ;GACD,CAAC,GACFjD,IAAI,CAAC+C,OAAO,CAACC,GAAG,EAAE;IAChBV,KAAK,EAAEA,KAAK,CAACE,IAAI;IACjBY,MAAM,EAAEL,OAAO,CAACK,MAAM;IACtBC,OAAO,EAAEN,OAAO,CAACM,OAAO;IACxBJ;GACD,CAAC;EACJ,OAAO,IAAAK,cAAI,EACT1D,MAAM,CAAC2D,QAAQ,CAACC,QAAQ,CAACN,WAAW,EAAEH,OAAO,EAAEA,OAAO,CAACU,IAAI,CAAC,EAAEC,eAAe,CAACR,WAAW,EAAEH,OAAO,CAAC,EAAE;IACnGY,UAAU,EAAE;GACb,CAAC,EACF/D,MAAM,CAACqC,GAAG,CAAE2B,CAAC,IAAK,IAAIC,kBAAkB,CAACd,OAAO,EAAEa,CAAC,CAAC,CAAC,CACtD;AACH,CAAC,CAAC;AAEJ,MAAMJ,QAAQ,GAAGA,CACfN,WAA+B,EAC/BH,OAAwC,EACxCU,IAAmB,KAEnB7D,MAAM,CAACkE,OAAO,CAAC,MAA8C;EAC3D,QAAQL,IAAI,CAACM,IAAI;IACf,KAAK,OAAO;MAAE;QACZb,WAAW,CAACc,GAAG,EAAE;QACjB,OAAOC,aAAa,CAACf,WAAW,EAAEH,OAAO,CAAC;MAC5C;IACA,KAAK,YAAY;IACjB,KAAK,KAAK;MAAE;QACVG,WAAW,CAACc,GAAG,CAACP,IAAI,CAACA,IAAI,CAAC;QAC1B,OAAOQ,aAAa,CAACf,WAAW,EAAEH,OAAO,CAAC;MAC5C;IACA,KAAK,UAAU;MAAE;QACf,MAAMmB,QAAQ,GAAG,IAAIC,QAAQ,CAACV,IAAI,CAACW,QAAQ,CAAC;QAE5CF,QAAQ,CAACb,OAAO,CAACgB,OAAO,CAAC,CAACC,KAAK,EAAEC,GAAG,KAAI;UACtCrB,WAAW,CAACsB,SAAS,CAACD,GAAG,EAAED,KAAK,CAAC;QACnC,CAAC,CAAC;QAEF,OAAO1E,MAAM,CAAC6E,UAAU,CAAC;UACvBC,GAAG,EAAEA,CAAA,KAAM,IAAAC,kBAAQ,EAACC,oBAAQ,CAACC,OAAO,CAACX,QAAQ,CAACT,IAAY,CAAC,EAAEP,WAAW,CAAC;UACzE4B,KAAK,EAAGC,KAAK,IACX,IAAIvF,KAAK,CAACwF,YAAY,CAAC;YACrBjC,OAAO;YACPkC,MAAM,EAAE,WAAW;YACnBF;WACD;SACJ,CAAC;MACJ;IACA,KAAK,QAAQ;MAAE;QACb,OAAOhF,MAAM,CAACmF,GAAG,CACfnF,MAAM,CAACoF,QAAQ,CAAC1B,IAAI,CAAC2B,MAAM,EAAGL,KAAK,IACjC,IAAIvF,KAAK,CAACwF,YAAY,CAAC;UACrBjC,OAAO;UACPkC,MAAM,EAAE,QAAQ;UAChBF;SACD,CAAC,CAAC,EACL3E,QAAQ,CAACiF,YAAY,CAAC,MAAMnC,WAAW,EAAG6B,KAAK,IAC7C,IAAIvF,KAAK,CAACwF,YAAY,CAAC;UACrBjC,OAAO;UACPkC,MAAM,EAAE,WAAW;UACnBF;SACD,CAAC,CAAC,CACN;MACH;EACF;AACF,CAAC,CAAC;AAEJ,MAAMrB,eAAe,GAAGA,CAACR,WAA+B,EAAEH,OAAwC,KAChGnD,MAAM,CAAC0F,KAAK,CAA4CC,MAAM,IAAI;EAChE,SAASC,OAAOA,CAACT,KAAY;IAC3BQ,MAAM,CAAC3F,MAAM,CAAC6F,IAAI,CAChB,IAAIjG,KAAK,CAACwF,YAAY,CAAC;MACrBjC,OAAO;MACPkC,MAAM,EAAE,WAAW;MACnBF;KACD,CAAC,CACH,CAAC;EACJ;EACA7B,WAAW,CAACwC,EAAE,CAAC,OAAO,EAAEF,OAAO,CAAC;EAEhC,SAASG,UAAUA,CAACzB,QAA8B;IAChDhB,WAAW,CAAC0C,GAAG,CAAC,OAAO,EAAEJ,OAAO,CAAC;IACjCD,MAAM,CAAC3F,MAAM,CAACiG,OAAO,CAAC3B,QAAQ,CAAC,CAAC;EAClC;EACAhB,WAAW,CAACwC,EAAE,CAAC,SAAS,EAAEC,UAAU,CAAC;EACrCzC,WAAW,CAACwC,EAAE,CAAC,UAAU,EAAEC,UAAU,CAAC;EAEtC,OAAO/F,MAAM,CAACwC,IAAI,CAAC,MAAK;IACtBc,WAAW,CAAC0C,GAAG,CAAC,OAAO,EAAEJ,OAAO,CAAC;IACjCtC,WAAW,CAAC0C,GAAG,CAAC,SAAS,EAAED,UAAU,CAAC;IACtCzC,WAAW,CAAC0C,GAAG,CAAC,UAAU,EAAED,UAAU,CAAC;EACzC,CAAC,CAAC;AACJ,CAAC,CAAC;AAEJ,MAAM1B,aAAa,GAAGA,CAACf,WAA+B,EAAEH,OAAwC,KAC9FnD,MAAM,CAAC0F,KAAK,CAA4BC,MAAM,IAAI;EAChD,SAASC,OAAOA,CAACT,KAAY;IAC3BQ,MAAM,CAAC3F,MAAM,CAAC6F,IAAI,CAChB,IAAIjG,KAAK,CAACwF,YAAY,CAAC;MACrBjC,OAAO;MACPkC,MAAM,EAAE,WAAW;MACnBF;KACD,CAAC,CACH,CAAC;EACJ;EACA7B,WAAW,CAAC4C,IAAI,CAAC,OAAO,EAAEN,OAAO,CAAC;EAElC,SAASO,QAAQA,CAAA;IACf7C,WAAW,CAAC0C,GAAG,CAAC,OAAO,EAAEJ,OAAO,CAAC;IACjCD,MAAM,CAAC3F,MAAM,CAACoG,IAAI,CAAC;EACrB;EACA9C,WAAW,CAAC4C,IAAI,CAAC,QAAQ,EAAEC,QAAQ,CAAC;EAEpC,OAAOnG,MAAM,CAACwC,IAAI,CAAC,MAAK;IACtBc,WAAW,CAAC0C,GAAG,CAAC,OAAO,EAAEJ,OAAO,CAAC;IACjCtC,WAAW,CAAC0C,GAAG,CAAC,QAAQ,EAAEG,QAAQ,CAAC;EACrC,CAAC,CAAC;AACJ,CAAC,CAAC;AAEJ,MAAMlC,kBAAmB,SAAQoC,4CAA4C;EAMhElD,OAAA;EAHF,CAACtD,cAAc,CAACyG,MAAM;EAE/BC,YACWpD,OAAwC,EACjDqD,MAA4B;IAE5B,KAAK,CAACA,MAAM,EAAGrB,KAAK,IAClB,IAAIvF,KAAK,CAAC6G,aAAa,CAAC;MACtBtD,OAAO;MACPmB,QAAQ,EAAE,IAAI;MACde,MAAM,EAAE,QAAQ;MAChBF;KACD,CAAC,CAAC;IATI,KAAAhC,OAAO,GAAPA,OAAO;IAUhB,IAAI,CAACtD,cAAc,CAACyG,MAAM,CAAC,GAAGzG,cAAc,CAACyG,MAAM;EACrD;EAEA,IAAII,MAAMA,CAAA;IACR,OAAO,IAAI,CAACF,MAAM,CAACG,UAAW;EAChC;EAEAC,aAAa;EACb,IAAIC,OAAOA,CAAA;IACT,IAAI,IAAI,CAACD,aAAa,KAAKE,SAAS,EAAE;MACpC,OAAO,IAAI,CAACF,aAAa;IAC3B;IACA,MAAMG,MAAM,GAAG,IAAI,CAACP,MAAM,CAAC/C,OAAO,CAAC,YAAY,CAAC;IAChD,IAAIuD,KAAK,CAACC,OAAO,CAACF,MAAM,CAAC,EAAE;MACzB,OAAO,IAAI,CAACH,aAAa,GAAGpH,OAAO,CAAC0H,aAAa,CAACH,MAAM,CAAC;IAC3D;IACA,OAAO,IAAI,CAACH,aAAa,GAAGpH,OAAO,CAAC2H,KAAK;EAC3C;EAEA,IAAI3C,QAAQA,CAAA;IACV,OAAOxE,MAAM,CAAC6E,UAAU,CAAC;MACvBC,GAAG,EAAEA,CAAA,KAAK;QACR,MAAMsC,IAAI,GAIN;UACF3D,OAAO,EAAE,IAAI4D,UAAU,CAACC,OAAO,CAAC,IAAI,CAACd,MAAM,CAAC/C,OAAc;SAC3D;QAED,IAAI,IAAI,CAAC+C,MAAM,CAACG,UAAU,EAAE;UAC1BS,IAAI,CAACV,MAAM,GAAG,IAAI,CAACF,MAAM,CAACG,UAAU;QACtC;QAEA,IAAI,IAAI,CAACH,MAAM,CAACe,aAAa,EAAE;UAC7BH,IAAI,CAACI,UAAU,GAAG,IAAI,CAAChB,MAAM,CAACe,aAAa;QAC7C;QAEA,OAAO,IAAIhD,QAAQ,CAACS,oBAAQ,CAACyC,KAAK,CAAC,IAAI,CAACjB,MAAM,CAAQ,EAAEY,IAAI,CAAC,CAAC5C,QAAQ,EAAE;MAC1E,CAAC;MACDU,KAAK,EAAE,IAAI,CAACU;KACb,CAAC;EACJ;EAEA8B,MAAMA,CAAA;IACJ,OAAO5H,eAAe,CAAC6H,OAAO,CAAC,IAAI,EAAE;MACnCC,GAAG,EAAE,qCAAqC;MAC1CzE,OAAO,EAAE,IAAI,CAACA,OAAO,CAACuE,MAAM,EAAE;MAC9BhB,MAAM,EAAE,IAAI,CAACA;KACd,CAAC;EACJ;;AAGF;AACO,MAAMxD,IAAI,GAAApB,OAAA,CAAAoB,IAAA,gBAAGlD,MAAM,CAACqC,GAAG,CAACJ,SAAS,EAAEgB,SAAS,CAAC;AAEpD;AACO,MAAM4E,iBAAiB,GAAA/F,OAAA,CAAA+F,iBAAA,gBAAGlI,MAAM,CAACmI,kBAAkB,CAAC5E,IAAI,CAAC;AAEhE;AACO,MAAM6E,KAAK,GAAAjG,OAAA,CAAAiG,KAAA,gBAAG7H,KAAK,CAAC8H,OAAO,CAACH,iBAAiB,EAAE7E,UAAU,CAAC","ignoreList":[]}