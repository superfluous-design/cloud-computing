{"version":3,"file":"worker.js","names":["Worker","_interopRequireWildcard","require","_WorkerError","Deferred","Effect","Exit","Layer","Scope","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","platformWorkerImpl","makePlatform","setup","scope","worker","flatMap","make","exitDeferred","thing","postMessage","msg","kill","terminate","_","send","on","unsafeDone","void","as","addFinalizer","suspend","await","pipe","interruptible","timeout","catchAllCause","sync","listen","deferred","emit","port","message","cause","WorkerError","reason","code","Error","layerWorker","exports","succeed","PlatformWorker","layerManager","provide","layer","spawn","merge","layerSpawner","layerPlatform"],"sources":["../../../src/internal/worker.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}