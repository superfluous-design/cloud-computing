{"version":3,"file":"OtlpMetrics.js","names":["Arr","Duration","Effect","Layer","Metric","MetricState","Option","Exporter","OtlpResource","make","fnUntraced","options","clock","startTime","String","unsafeCurrentTimeNanos","resource","metricsScope","name","serviceName","snapshot","unsafeSnapshot","nowNanos","nowTime","metricData","metricDataByName","Map","addMetricData","data","push","set","i","len","length","metricKey","metricState","unit","attributes","reduce","tags","acc","label","key","value","stringValue","isCounterState","dataPoint","startTimeUnixNano","timeUnixNano","count","asInt","Number","asDouble","has","get","sum","dataPoints","description","getOrEmpty","aggregationTemporality","EAggregationTemporality","AGGREGATION_TEMPORALITY_CUMULATIVE","isMonotonic","keyType","incremental","isGaugeState","gauge","isHistogramState","size","buckets","boundaries","allocate","counts","prev","boundary","min","max","bucketCounts","explicitBounds","histogram","isFrequencyState","freqKey","occurrences","isSummaryState","quantile","quantiles","toString","_tag","countDataPoint","sumDataPoint","resourceMetrics","scopeMetrics","scope","metrics","url","headers","maxBatchSize","exportInterval","seconds","body","shutdownTimeout","layer","scopedDiscard","getOrElse"],"sources":["../../src/OtlpMetrics.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}