{"version":3,"file":"OtlpTracer.js","names":["Cause","Duration","Effect","Layer","Option","Tracer","Exporter","entriesToAttributes","OtlpResource","make","fnUntraced","options","otelResource","resource","scope","name","serviceName","exporter","label","url","headers","exportInterval","seconds","maxBatchSize","body","spans","data","resourceSpans","scopeSpans","shutdownTimeout","span","parent","context","links","startTime","kind","makeSpan","status","_tag","attributes","Map","sampled","export","push","makeOtlpSpan","f","fiber","currentSpan","undefined","defaultContext","layer","unwrapScoped","map","setTracer","_","SpanProto","end","endTime","exit","attribute","key","value","set","event","events","addLinks","self","Object","assign","create","isSome","traceId","generateId","spanId","len","chars","result","i","Math","floor","random","length","entries","timeUnixNano","String","droppedAttributesCount","otelStatus","constOtelStatusSuccess","isInterruptedOnly","cause","code","StatusCode","Ok","message","pretty","errors","prettyErrors","firstError","Error","stringValue","boolValue","renderErrorCause","parentSpanId","SpanKind","startTimeUnixNano","endTimeUnixNano","droppedEventsCount","link","droppedLinksCount"],"sources":["../../src/OtlpTracer.ts"],"sourcesContent":[null],"mappings":"AAKA,OAAO,KAAKA,KAAK,MAAM,cAAc;AAErC,OAAO,KAAKC,QAAQ,MAAM,iBAAiB;AAC3C,OAAO,KAAKC,MAAM,MAAM,eAAe;AAEvC,OAAO,KAAKC,KAAK,MAAM,cAAc;AACrC,OAAO,KAAKC,MAAM,MAAM,eAAe;AAEvC,OAAO,KAAKC,MAAM,MAAM,eAAe;AAEvC,OAAO,KAAKC,QAAQ,MAAM,4BAA4B;AAEtD,SAASC,mBAAmB,QAAQ,mBAAmB;AACvD,OAAO,KAAKC,YAAY,MAAM,mBAAmB;AAEjD;;;;AAIA,OAAO,MAAMC,IAAI,gBAkBbP,MAAM,CAACQ,UAAU,CAAC,WAAUC,OAAO;EACrC,MAAMC,YAAY,GAAGJ,YAAY,CAACC,IAAI,CAACE,OAAO,CAACE,QAAQ,CAAC;EACxD,MAAMC,KAAK,GAAU;IACnBC,IAAI,EAAEJ,OAAO,CAACE,QAAQ,CAACG;GACxB;EAED,MAAMC,QAAQ,GAAG,OAAOX,QAAQ,CAACG,IAAI,CAAC;IACpCS,KAAK,EAAE,YAAY;IACnBC,GAAG,EAAER,OAAO,CAACQ,GAAG;IAChBC,OAAO,EAAET,OAAO,CAACS,OAAO;IACxBC,cAAc,EAAEV,OAAO,CAACU,cAAc,IAAIpB,QAAQ,CAACqB,OAAO,CAAC,CAAC,CAAC;IAC7DC,YAAY,EAAEZ,OAAO,CAACY,YAAY,IAAI,IAAI;IAC1CC,IAAIA,CAACC,KAAK;MACR,MAAMC,IAAI,GAAc;QACtBC,aAAa,EAAE,CAAC;UACdd,QAAQ,EAAED,YAAY;UACtBgB,UAAU,EAAE,CAAC;YACXd,KAAK;YACLW;WACD;SACF;OACF;MACD,OAAOC,IAAI;IACb,CAAC;IACDG,eAAe,EAAElB,OAAO,CAACkB,eAAe,IAAI5B,QAAQ,CAACqB,OAAO,CAAC,CAAC;GAC/D,CAAC;EAEF,OAAOjB,MAAM,CAACI,IAAI,CAAC;IACjBqB,IAAIA,CAACf,IAAI,EAAEgB,MAAM,EAAEC,OAAO,EAAEC,KAAK,EAAEC,SAAS,EAAEC,IAAI;MAChD,OAAOC,QAAQ,CAAC;QACdrB,IAAI;QACJgB,MAAM;QACNC,OAAO;QACPK,MAAM,EAAE;UACNC,IAAI,EAAE,SAAS;UACfJ;SACD;QACDK,UAAU,EAAE,IAAIC,GAAG,EAAE;QACrBP,KAAK;QACLQ,OAAO,EAAE,IAAI;QACbN,IAAI;QACJO,MAAMA,CAACZ,IAAI;UACTb,QAAQ,CAAC0B,IAAI,CAACC,YAAY,CAACd,IAAI,CAAC,CAAC;QACnC;OACD,CAAC;IACJ,CAAC;IACDE,OAAO,EAAErB,OAAO,CAACqB,OAAO,GACtB,UAASa,CAAC,EAAEC,KAAK;MACf,IAAIA,KAAK,CAACC,WAAW,KAAKC,SAAS,EAAE;QACnC,OAAOH,CAAC,EAAE;MACZ;MACA,OAAOlC,OAAO,CAACqB,OAAQ,CAACa,CAAC,EAAEC,KAAK,CAACC,WAAW,CAAC;IAC/C,CAAC,GACDE;GACH,CAAC;AACJ,CAAC,CAAC;AAEF;;;;AAIA,OAAO,MAAMC,KAAK,GAAIvC,OAYrB,IAAuDR,KAAK,CAACgD,YAAY,CAACjD,MAAM,CAACkD,GAAG,CAAC3C,IAAI,CAACE,OAAO,CAAC,EAAER,KAAK,CAACkD,SAAS,CAAC,CAAC;AAEtH;AAEA,SAASJ,cAAcA,CAAIJ,CAAU,EAAES,CAAM;EAC3C,OAAOT,CAAC,EAAE;AACZ;AAUA,MAAMU,SAAS,GAAG;EAChBjB,IAAI,EAAE,MAAM;EACZkB,GAAGA,CAAiBC,OAAe,EAAEC,IAAiC;IACpE,IAAI,CAACrB,MAAM,GAAG;MACZC,IAAI,EAAE,OAAO;MACbJ,SAAS,EAAE,IAAI,CAACG,MAAM,CAACH,SAAS;MAChCuB,OAAO;MACPC;KACD;IACD,IAAI,CAAChB,MAAM,CAAC,IAAI,CAAC;EACnB,CAAC;EACDiB,SAASA,CAAiBC,GAAW,EAAEC,KAAc;IACnD,IAAI,CAACtB,UAAU,CAACuB,GAAG,CAACF,GAAG,EAAEC,KAAK,CAAC;EACjC,CAAC;EACDE,KAAKA,CAAiBhD,IAAY,EAAEmB,SAAiB,EAAEK,UAAoC;IACzF,IAAI,CAACyB,MAAM,CAACrB,IAAI,CAAC,CAAC5B,IAAI,EAAEmB,SAAS,EAAEK,UAAU,CAAC,CAAC;EACjD,CAAC;EACD0B,QAAQA,CAAiBhC,KAAqC;IAC5D;IACA,IAAI,CAACA,KAAK,CAACU,IAAI,CAAC,GAAGV,KAAK,CAAC;EAC3B;CACD;AAED,MAAMG,QAAQ,GAAIzB,OAUjB,IAAc;EACb,MAAMuD,IAAI,GAAGC,MAAM,CAACC,MAAM,CAACD,MAAM,CAACE,MAAM,CAACd,SAAS,CAAC,EAAE5C,OAAO,CAAC;EAC7D,IAAIP,MAAM,CAACkE,MAAM,CAACJ,IAAI,CAACnC,MAAM,CAAC,EAAE;IAC9BmC,IAAI,CAACK,OAAO,GAAGL,IAAI,CAACnC,MAAM,CAAC8B,KAAK,CAACU,OAAO;EAC1C,CAAC,MAAM;IACLL,IAAI,CAACK,OAAO,GAAGC,UAAU,CAAC,EAAE,CAAC;EAC/B;EACAN,IAAI,CAACO,MAAM,GAAGD,UAAU,CAAC,EAAE,CAAC;EAC5BN,IAAI,CAACF,MAAM,GAAG,EAAE;EAChB,OAAOE,IAAI;AACb,CAAC;AAED,MAAMM,UAAU,GAAIE,GAAW,IAAY;EACzC,MAAMC,KAAK,GAAG,kBAAkB;EAChC,IAAIC,MAAM,GAAG,EAAE;EACf,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,GAAG,EAAEG,CAAC,EAAE,EAAE;IAC5BD,MAAM,IAAID,KAAK,CAACG,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,KAAK,CAACM,MAAM,CAAC,CAAC;EAC3D;EACA,OAAOL,MAAM;AACf,CAAC;AAED,MAAMhC,YAAY,GAAIsB,IAAc,IAAc;EAChD,MAAM7B,MAAM,GAAG6B,IAAI,CAAC7B,MAAgD;EACpE,MAAME,UAAU,GAAGhC,mBAAmB,CAAC2D,IAAI,CAAC3B,UAAU,CAAC2C,OAAO,EAAE,CAAC;EACjE,MAAMlB,MAAM,GAAGE,IAAI,CAACF,MAAM,CAACZ,GAAG,CAAC,CAAC,CAACrC,IAAI,EAAEmB,SAAS,EAAEK,UAAU,CAAC,MAAM;IACjExB,IAAI;IACJoE,YAAY,EAAEC,MAAM,CAAClD,SAAS,CAAC;IAC/BK,UAAU,EAAEA,UAAU,GAClBhC,mBAAmB,CAAC4D,MAAM,CAACe,OAAO,CAAC3C,UAAU,CAAC,CAAC,GAC/C,EAAE;IACN8C,sBAAsB,EAAE;GACzB,CAAC,CAAC;EACH,IAAIC,UAAkB;EAEtB,IAAIjD,MAAM,CAACqB,IAAI,CAACpB,IAAI,KAAK,SAAS,EAAE;IAClCgD,UAAU,GAAGC,sBAAsB;EACrC,CAAC,MAAM,IAAIvF,KAAK,CAACwF,iBAAiB,CAACnD,MAAM,CAACqB,IAAI,CAAC+B,KAAK,CAAC,EAAE;IACrDH,UAAU,GAAG;MACXI,IAAI,EAAEC,UAAU,CAACC,EAAE;MACnBC,OAAO,EAAE7F,KAAK,CAAC8F,MAAM,CAACzD,MAAM,CAACqB,IAAI,CAAC+B,KAAK;KACxC;EACH,CAAC,MAAM;IACL,MAAMM,MAAM,GAAG/F,KAAK,CAACgG,YAAY,CAAC3D,MAAM,CAACqB,IAAI,CAAC+B,KAAK,CAAC;IACpD,MAAMQ,UAAU,GAAGF,MAAM,CAAC,CAAC,CAAC;IAC5BT,UAAU,GAAG;MACXI,IAAI,EAAEC,UAAU,CAACO;KAClB;IACD3D,UAAU,CAACI,IAAI,CAAC;MACdiB,GAAG,EAAE,YAAY;MACjBC,KAAK,EAAE;QAAEsC,WAAW,EAAE;MAAgB;KACvC,EAAE;MACDvC,GAAG,EAAE,oBAAoB;MACzBC,KAAK,EAAE;QAAEuC,SAAS,EAAE;MAAI;KACzB,CAAC;IACF,IAAIH,UAAU,EAAE;MACdX,UAAU,CAACO,OAAO,GAAGI,UAAU,CAACJ,OAAO;MACvC7B,MAAM,CAACrB,IAAI,CAAC;QACV5B,IAAI,EAAE,WAAW;QACjBoE,YAAY,EAAEC,MAAM,CAAC/C,MAAM,CAACoB,OAAO,CAAC;QACpC4B,sBAAsB,EAAE,CAAC;QACzB9C,UAAU,EAAE,CACV;UACE,KAAK,EAAE,gBAAgB;UACvB,OAAO,EAAE;YACP,aAAa,EAAE0D,UAAU,CAAClF;;SAE7B,EACD;UACE,KAAK,EAAE,mBAAmB;UAC1B,OAAO,EAAE;YACP,aAAa,EAAEkF,UAAU,CAACJ;;SAE7B,EACD;UACE,KAAK,EAAE,sBAAsB;UAC7B,OAAO,EAAE;YACP,aAAa,EAAE7F,KAAK,CAAC8F,MAAM,CAACzD,MAAM,CAACqB,IAAI,CAAC+B,KAAK,EAAE;cAAEY,gBAAgB,EAAE;YAAI,CAAE;;SAE5E;OAEJ,CAAC;IACJ;EACF;EAEA,OAAO;IACL9B,OAAO,EAAEL,IAAI,CAACK,OAAO;IACrBE,MAAM,EAAEP,IAAI,CAACO,MAAM;IACnB6B,YAAY,EAAElG,MAAM,CAACkE,MAAM,CAACJ,IAAI,CAACnC,MAAM,CAAC,GAAGmC,IAAI,CAACnC,MAAM,CAAC8B,KAAK,CAACY,MAAM,GAAGzB,SAAS;IAC/EjC,IAAI,EAAEmD,IAAI,CAACnD,IAAI;IACfoB,IAAI,EAAEoE,QAAQ,CAACrC,IAAI,CAAC/B,IAAI,CAAC;IACzBqE,iBAAiB,EAAEpB,MAAM,CAAC/C,MAAM,CAACH,SAAS,CAAC;IAC3CuE,eAAe,EAAErB,MAAM,CAAC/C,MAAM,CAACoB,OAAO,CAAC;IACvClB,UAAU;IACV8C,sBAAsB,EAAE,CAAC;IACzBrB,MAAM;IACN0C,kBAAkB,EAAE,CAAC;IACrBrE,MAAM,EAAEiD,UAAU;IAClBrD,KAAK,EAAEiC,IAAI,CAACjC,KAAK,CAACmB,GAAG,CAAEuD,IAAI,KAAM;MAC/BpC,OAAO,EAAEoC,IAAI,CAAC7E,IAAI,CAACyC,OAAO;MAC1BE,MAAM,EAAEkC,IAAI,CAAC7E,IAAI,CAAC2C,MAAM;MACxBlC,UAAU,EAAEhC,mBAAmB,CAAC4D,MAAM,CAACe,OAAO,CAACyB,IAAI,CAACpE,UAAU,CAAC,CAAC;MAChE8C,sBAAsB,EAAE;KACzB,CAAC,CAAC;IACHuB,iBAAiB,EAAE;GACpB;AACH,CAAC;AAwDD,IAAWjB,UAIV;AAJD,WAAWA,UAAU;EACnBA,UAAA,CAAAA,UAAA,wBAAS;EACTA,UAAA,CAAAA,UAAA,kBAAM;EACNA,UAAA,CAAAA,UAAA,wBAAS;AACX,CAAC,EAJUA,UAAU,KAAVA,UAAU;AAMrB,IAAKY,QAOJ;AAPD,WAAKA,QAAQ;EACXA,QAAA,CAAAA,QAAA,oCAAe;EACfA,QAAA,CAAAA,QAAA,8BAAY;EACZA,QAAA,CAAAA,QAAA,0BAAU;EACVA,QAAA,CAAAA,QAAA,0BAAU;EACVA,QAAA,CAAAA,QAAA,8BAAY;EACZA,QAAA,CAAAA,QAAA,8BAAY;AACd,CAAC,EAPIA,QAAQ,KAARA,QAAQ;AASb,MAAMhB,sBAAsB,GAAW;EACrCG,IAAI,EAAEC,UAAU,CAACC;CAClB","ignoreList":[]}