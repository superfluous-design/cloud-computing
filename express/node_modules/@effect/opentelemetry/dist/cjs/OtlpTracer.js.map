{"version":3,"file":"OtlpTracer.js","names":["Cause","_interopRequireWildcard","require","Duration","Effect","Layer","Option","Tracer","Exporter","_OtlpResource","OtlpResource","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","make","exports","fnUntraced","options","otelResource","resource","scope","name","serviceName","exporter","label","url","headers","exportInterval","seconds","maxBatchSize","body","spans","data","resourceSpans","scopeSpans","shutdownTimeout","span","parent","context","links","startTime","kind","makeSpan","status","_tag","attributes","Map","sampled","export","push","makeOtlpSpan","fiber","currentSpan","undefined","defaultContext","layer","unwrapScoped","map","setTracer","_","SpanProto","end","endTime","exit","attribute","key","value","event","events","addLinks","self","assign","create","isSome","traceId","generateId","spanId","len","chars","result","Math","floor","random","length","entriesToAttributes","entries","timeUnixNano","String","droppedAttributesCount","otelStatus","constOtelStatusSuccess","isInterruptedOnly","cause","code","StatusCode","Ok","message","pretty","errors","prettyErrors","firstError","Error","stringValue","boolValue","renderErrorCause","parentSpanId","SpanKind","startTimeUnixNano","endTimeUnixNano","droppedEventsCount","link","droppedLinksCount"],"sources":["../../src/OtlpTracer.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}