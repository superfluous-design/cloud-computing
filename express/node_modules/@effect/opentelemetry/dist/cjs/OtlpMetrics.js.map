{"version":3,"file":"OtlpMetrics.js","names":["Arr","_interopRequireWildcard","require","Duration","Effect","Layer","Metric","MetricState","Option","Exporter","OtlpResource","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","make","exports","fnUntraced","options","clock","startTime","String","unsafeCurrentTimeNanos","resource","metricsScope","name","serviceName","snapshot","unsafeSnapshot","nowNanos","nowTime","metricData","metricDataByName","Map","addMetricData","data","push","len","length","metricKey","metricState","unit","attributes","reduce","tags","acc","label","key","value","stringValue","isCounterState","dataPoint","startTimeUnixNano","timeUnixNano","count","asInt","Number","asDouble","sum","dataPoints","description","getOrEmpty","aggregationTemporality","EAggregationTemporality","AGGREGATION_TEMPORALITY_CUMULATIVE","isMonotonic","keyType","incremental","isGaugeState","gauge","isHistogramState","size","buckets","boundaries","allocate","counts","prev","boundary","min","max","bucketCounts","explicitBounds","histogram","isFrequencyState","freqKey","occurrences","isSummaryState","quantile","quantiles","toString","_tag","countDataPoint","sumDataPoint","resourceMetrics","scopeMetrics","scope","metrics","url","headers","maxBatchSize","exportInterval","seconds","body","shutdownTimeout","layer","scopedDiscard","getOrElse"],"sources":["../../src/OtlpMetrics.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}