{"version":3,"file":"EventLog.js","names":["Chunk","Context","Effect","FiberMap","FiberRef","identity","Layer","pipeArguments","Predicate","Queue","Schema","Entry","EventJournal","makeEntryId","Reactivity","SchemaTypeId","Symbol","for","isEventLogSchema","u","hasProperty","schema","groups","EventLog","HandlersTypeId","handlersProto","_Endpoints","handle","tag","handler","makeHandlers","group","context","handlers","event","events","pipe","arguments","options","Object","assign","create","f","gen","result","isEffect","registry","Registry","add","scopedDiscard","provide","layer","groupCompaction","effect","log","registerCompaction","keys","fnUntraced","entries","write","writePayload","timestamp","payload","entry","id","msecs","encode","payloadMsgPack","locally","currentContext","orDie","primaryKey","disableValidation","byPrimaryKey","Map","decodeUnknown","has","record","get","push","taggedPayloads","_tag","set","createdAtMillis","groupReactivity","Array","isArray","registerReactivity","obj","Tag","sync","items","Identity","make","journal","remotes","compactors","journalSemaphore","makeSemaphore","reactivity","reactivityKeys","runRemote","remote","startSequence","nextRemoteSequence","changes","takeAll","flatMap","writeFromRemote","remoteId","toReadonlyArray","compact","size","remoteEntries","unprocessed","brackets","uncompacted","uncompactedRemote","i","length","remoteEntry","compactor","compacted","currentEntries","j","nextRemoteEntry","map","_","undefined","conflicts","logDebug","decodePayload","decode","decodedConflicts","key","unsafeInvalidate","catchAllCause","annotateLogs","service","entryId","idString","withPermits","forever","fork","withRemoteUncommited","addFinalizer","ignore","takeBetween","Number","MAX_SAFE_INTEGER","zipRight","sleep","scoped","provideService","interruptible","of","die","tap","mapInputContext","merge","registerRemote","acquireRelease","run","remove","Set","delete","destroy","layerEventLog","_schema","makeClient"],"sources":["../../src/EventLog.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}