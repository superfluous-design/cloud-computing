{"version":3,"file":"EventJournal.js","names":["MsgPack","Context","DateTime","Effect","Layer","PubSub","Schema","Uuid","EventJournal","Tag","ErrorTypeId","Symbol","for","EventJournalError","TaggedClass","method","String","cause","Defect","RemoteIdTypeId","RemoteId","Uint8ArrayFromSelf","pipe","brand","makeRemoteId","v4","Uint8Array","EntryIdTypeId","EntryId","makeEntryId","options","v7","entryIdMillis","entryId","bytes","set","subarray","Number","DataView","buffer","getBigUint64","Entry","Class","id","event","primaryKey","payload","arrayMsgPack","Array","schema","encodeArray","encode","decodeArray","decode","idString","stringify","createdAtMillis","createdAt","unsafeMake","RemoteEntry","remoteSequence","entry","makeMemory","gen","journal","byId","Map","remotes","pubsub","unbounded","ensureRemote","remoteId","remoteIdString","remote","get","sequence","missing","slice","of","entries","sync","write","effect","acquireUseRelease","disableValidation","exit","suspend","_tag","has","void","push","forEach","publish","writeFromRemote","uncommittedRemotes","uncommitted","remoteEntry","brackets","compact","compacted","remoteEntries","originEntry","entryMillis","conflicts","i","length","undefined","j","sort","a","b","withRemoteUncommited","f","last","nextRemoteSequence","changes","subscribe","destroy","clear","layerMemory","makeIndexedDb","database","openRequest","indexedDB","open","onupgradeneeded","db","result","createObjectStore","keyPath","createIndex","unique","remoteEntryId","acquireRelease","idbReq","close","transaction","objectStore","index","getAll","flatMap","_","decodeEntryIdbArray","mapError","uninterruptibleMask","restore","zipLeft","put","encodeEntryIdb","async","resume","tx","iterator","handleNext","state","done","value","onsuccess","target","next","oncomplete","onerror","fail","error","abort","cursorRequest","openCursor","IDBKeyRange","lowerBound","cursor","decodedEntry","decodeEntryIdb","continue","add","entriesStore","remotesStore","remoteEntryIdStore","startEntryId","entryCursor","succeed","bound","Infinity","deleteDatabase","decodeSync","encodeSync","EntryIdbArray","decodeUnknown","layerIndexedDb","scoped","evaluate","request","readyState"],"sources":["../../src/EventJournal.ts"],"sourcesContent":[null],"mappings":"AAAA;;;AAGA,OAAO,KAAKA,OAAO,MAAM,0BAA0B;AACnD,OAAO,KAAKC,OAAO,MAAM,gBAAgB;AACzC,OAAO,KAAKC,QAAQ,MAAM,iBAAiB;AAC3C,OAAO,KAAKC,MAAM,MAAM,eAAe;AACvC,OAAO,KAAKC,KAAK,MAAM,cAAc;AACrC,OAAO,KAAKC,MAAM,MAAM,eAAe;AAEvC,OAAO,KAAKC,MAAM,MAAM,eAAe;AAEvC,OAAO,KAAKC,IAAI,MAAM,MAAM;AAE5B;;;;AAIA,OAAM,MAAOC,YAAa,sBAAQP,OAAO,CAACQ,GAAG,CAAC,mCAAmC,CAAC,EA8D/E;AAEH;;;;AAIA,OAAO,MAAMC,WAAW,gBAAkBC,MAAM,CAACC,GAAG,CAAC,2CAA2C,CAAC;AAQjG;;;;AAIA,OAAM,MAAOC,iBACX,sBAAQP,MAAM,CAACQ,WAAW,CAAoB,yCAAyC,CAAC,CAAC,mBAAmB,EAAE;EAC5GC,MAAM,EAAET,MAAM,CAACU,MAAM;EACrBC,KAAK,EAAEX,MAAM,CAACY;CACf,CAAC;EAEF;;;EAGS,CAACR,WAAW,IAAiBA,WAAW;;AAGnD;;;;AAIA,OAAO,MAAMS,cAAc,gBAAkBR,MAAM,CAACC,GAAG,CAAC,4CAA4C,CAAC;AAErG;;;;AAIA,OAAO,MAAMQ,QAAQ,gBAAGd,MAAM,CAACe,kBAAkB,CAACC,IAAI,cAAChB,MAAM,CAACiB,KAAK,CAACJ,cAAc,CAAC,CAAC;AAQpF;;;;AAIA,OAAO,MAAMK,YAAY,GAAGA,CAAA,KAAgBjB,IAAI,CAACkB,EAAE,CAAC,EAAE,EAAE,IAAIC,UAAU,CAAC,EAAE,CAAC,CAAa;AAEvF;;;;AAIA,OAAO,MAAMC,aAAa,gBAAkBhB,MAAM,CAACC,GAAG,CAAC,2CAA2C,CAAC;AAEnG;;;;AAIA,OAAO,MAAMgB,OAAO,gBAAGtB,MAAM,CAACe,kBAAkB,CAACC,IAAI,cAAChB,MAAM,CAACiB,KAAK,CAACI,aAAa,CAAC,CAAC;AAQlF;;;;AAIA,OAAO,MAAME,WAAW,GAAGA,CAACC,OAAA,GAA8B,EAAE,KAAa;EACvE,OAAOvB,IAAI,CAACwB,EAAE,CAACD,OAAO,EAAE,IAAIJ,UAAU,CAAC,EAAE,CAAC,CAAY;AACxD,CAAC;AAED;;;;AAIA,OAAO,MAAMM,aAAa,GAAIC,OAAgB,IAAY;EACxD,MAAMC,KAAK,GAAG,IAAIR,UAAU,CAAC,CAAC,CAAC;EAC/BQ,KAAK,CAACC,GAAG,CAACF,OAAO,CAACG,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;EACpC,OAAOC,MAAM,CAAC,IAAIC,QAAQ,CAACJ,KAAK,CAACK,MAAM,CAAC,CAACC,YAAY,CAAC,CAAC,CAAC,CAAC;AAC3D,CAAC;AAED;;;;AAIA,OAAM,MAAOC,KAAM,sBAAQnC,MAAM,CAACoC,KAAK,CAAQ,yCAAyC,CAAC,CAAC;EACxFC,EAAE,EAAEf,OAAO;EACXgB,KAAK,EAAEtC,MAAM,CAACU,MAAM;EACpB6B,UAAU,EAAEvC,MAAM,CAACU,MAAM;EACzB8B,OAAO,EAAExC,MAAM,CAACe;CACjB,CAAC;EACA;;;EAGA,OAAO0B,YAAY,gBAAGzC,MAAM,CAAC0C,KAAK,cAAChD,OAAO,CAACiD,MAAM,CAACR,KAAK,CAAC,CAAC;EAEzD;;;EAGA,OAAOS,WAAW,gBAAG5C,MAAM,CAAC6C,MAAM,CAACV,KAAK,CAACM,YAAY,CAAC;EAEtD;;;EAGA,OAAOK,WAAW,gBAAG9C,MAAM,CAAC+C,MAAM,CAACZ,KAAK,CAACM,YAAY,CAAC;EAEtD;;;EAGA,IAAIO,QAAQA,CAAA;IACV,OAAO/C,IAAI,CAACgD,SAAS,CAAC,IAAI,CAACZ,EAAE,CAAC;EAChC;EAEA;;;EAGA,IAAIa,eAAeA,CAAA;IACjB,OAAOxB,aAAa,CAAC,IAAI,CAACW,EAAE,CAAC;EAC/B;EAEA;;;EAGA,IAAIc,SAASA,CAAA;IACX,OAAOvD,QAAQ,CAACwD,UAAU,CAAC,IAAI,CAACF,eAAe,CAAC;EAClD;;AAGF;;;;AAIA,OAAM,MAAOG,WAAY,sBAAQrD,MAAM,CAACoC,KAAK,CAAc,+CAA+C,CAAC,CAAC;EAC1GkB,cAAc,EAAEtD,MAAM,CAAC+B,MAAM;EAC7BwB,KAAK,EAAEpB;CACR,CAAC;AAEF;;;;AAIA,OAAO,MAAMqB,UAAU,gBAA+C3D,MAAM,CAAC4D,GAAG,CAAC,aAAS;EACxF,MAAMC,OAAO,GAAiB,EAAE;EAChC,MAAMC,IAAI,GAAG,IAAIC,GAAG,EAAiB;EACrC,MAAMC,OAAO,GAAG,IAAID,GAAG,EAAuD;EAC9E,MAAME,MAAM,GAAG,OAAO/D,MAAM,CAACgE,SAAS,EAAS;EAE/C,MAAMC,YAAY,GAAIC,QAAkB,IAAI;IAC1C,MAAMC,cAAc,GAAGjE,IAAI,CAACgD,SAAS,CAACgB,QAAQ,CAAC;IAC/C,IAAIE,MAAM,GAAGN,OAAO,CAACO,GAAG,CAACF,cAAc,CAAC;IACxC,IAAIC,MAAM,EAAE,OAAOA,MAAM;IACzBA,MAAM,GAAG;MAAEE,QAAQ,EAAE,CAAC;MAAEC,OAAO,EAAEZ,OAAO,CAACa,KAAK;IAAE,CAAE;IAClDV,OAAO,CAAChC,GAAG,CAACqC,cAAc,EAAEC,MAAM,CAAC;IACnC,OAAOA,MAAM;EACf,CAAC;EAED,OAAOjE,YAAY,CAACsE,EAAE,CAAC;IACrBC,OAAO,EAAE5E,MAAM,CAAC6E,IAAI,CAAC,MAAMhB,OAAO,CAACa,KAAK,EAAE,CAAC;IAC3CI,KAAKA,CAAC;MAAEC,MAAM;MAAEtC,KAAK;MAAEE,OAAO;MAAED;IAAU,CAAE;MAC1C,OAAO1C,MAAM,CAACgF,iBAAiB,CAC7BhF,MAAM,CAAC6E,IAAI,CAAC,MACV,IAAIvC,KAAK,CAAC;QACRE,EAAE,EAAEd,WAAW,EAAE;QACjBe,KAAK;QACLC,UAAU;QACVC;OACD,EAAE;QAAEsC,iBAAiB,EAAE;MAAI,CAAE,CAAC,CAChC,EACDF,MAAM,EACN,CAACrB,KAAK,EAAEwB,IAAI,KACVlF,MAAM,CAACmF,OAAO,CAAC,MAAK;QAClB,IAAID,IAAI,CAACE,IAAI,KAAK,SAAS,IAAItB,IAAI,CAACuB,GAAG,CAAC3B,KAAK,CAACP,QAAQ,CAAC,EAAE,OAAOnD,MAAM,CAACsF,IAAI;QAC3EzB,OAAO,CAAC0B,IAAI,CAAC7B,KAAK,CAAC;QACnBI,IAAI,CAAC9B,GAAG,CAAC0B,KAAK,CAACP,QAAQ,EAAEO,KAAK,CAAC;QAC/BM,OAAO,CAACwB,OAAO,CAAElB,MAAM,IAAI;UACzBA,MAAM,CAACG,OAAO,CAACc,IAAI,CAAC7B,KAAK,CAAC;QAC5B,CAAC,CAAC;QACF,OAAOO,MAAM,CAACwB,OAAO,CAAC/B,KAAK,CAAC;MAC9B,CAAC,CAAC,CACL;IACH,CAAC;IACDgC,eAAe,EAAG/D,OAAO,IACvB3B,MAAM,CAAC4D,GAAG,CAAC,aAAS;MAClB,MAAMU,MAAM,GAAGH,YAAY,CAACxC,OAAO,CAACyC,QAAQ,CAAC;MAC7C,MAAMuB,kBAAkB,GAAuB,EAAE;MACjD,MAAMC,WAAW,GAAiB,EAAE;MACpC,KAAK,MAAMC,WAAW,IAAIlE,OAAO,CAACiD,OAAO,EAAE;QACzC,IAAId,IAAI,CAACuB,GAAG,CAACQ,WAAW,CAACnC,KAAK,CAACP,QAAQ,CAAC,EAAE;UACxC,IAAI0C,WAAW,CAACpC,cAAc,GAAGa,MAAM,CAACE,QAAQ,EAAE;YAChDF,MAAM,CAACE,QAAQ,GAAGqB,WAAW,CAACpC,cAAc;UAC9C;UACA;QACF;QACAkC,kBAAkB,CAACJ,IAAI,CAACM,WAAW,CAAC;QACpCD,WAAW,CAACL,IAAI,CAACM,WAAW,CAACnC,KAAK,CAAC;MACrC;MAEA,MAAMoC,QAAQ,GAAGnE,OAAO,CAACoE,OAAO,GAC5B,OAAOpE,OAAO,CAACoE,OAAO,CAACJ,kBAAkB,CAAC,GAC1C,CAAC,CAACC,WAAW,EAAED,kBAAkB,CAAC,CAAU;MAEhD,KAAK,MAAM,CAACK,SAAS,EAAEC,aAAa,CAAC,IAAIH,QAAQ,EAAE;QACjD,KAAK,MAAMI,WAAW,IAAIF,SAAS,EAAE;UACnC,MAAMG,WAAW,GAAGtE,aAAa,CAACqE,WAAW,CAAC1D,EAAE,CAAC;UACjD,MAAM4D,SAAS,GAAiB,EAAE;UAClC,KAAK,IAAIC,CAAC,GAAGxC,OAAO,CAACyC,MAAM,GAAG,CAAC,EAAED,CAAC,IAAI,CAAC,CAAC,EAAEA,CAAC,EAAE,EAAE;YAC7C,MAAM3C,KAAK,GAAGG,OAAO,CAACwC,CAAC,CAAC;YACxB,IAAI3C,KAAK,KAAK6C,SAAS,IAAI7C,KAAK,CAACL,eAAe,GAAG8C,WAAW,EAAE;cAC9D;YACF;YACA,KAAK,IAAIK,CAAC,GAAGH,CAAC,GAAG,CAAC,EAAEG,CAAC,GAAG3C,OAAO,CAACyC,MAAM,EAAEE,CAAC,EAAE,EAAE;cAC3C,MAAM9C,KAAK,GAAGG,OAAO,CAAC2C,CAAC,CAAE;cACzB,IAAI9C,KAAK,CAACjB,KAAK,KAAKyD,WAAW,CAACzD,KAAK,IAAIiB,KAAK,CAAChB,UAAU,KAAKwD,WAAW,CAACxD,UAAU,EAAE;gBACpF0D,SAAS,CAACb,IAAI,CAAC7B,KAAK,CAAC;cACvB;YACF;YACA,OAAO/B,OAAO,CAACoD,MAAM,CAAC;cAAErB,KAAK,EAAEwC,WAAW;cAAEE;YAAS,CAAE,CAAC;YACxD;UACF;QACF;QACA,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,aAAa,CAACK,MAAM,EAAEE,CAAC,EAAE,EAAE;UAC7C,MAAMX,WAAW,GAAGI,aAAa,CAACO,CAAC,CAAC;UACpC3C,OAAO,CAAC0B,IAAI,CAACM,WAAW,CAACnC,KAAK,CAAC;UAC/B,IAAImC,WAAW,CAACpC,cAAc,GAAGa,MAAM,CAACE,QAAQ,EAAE;YAChDF,MAAM,CAACE,QAAQ,GAAGqB,WAAW,CAACpC,cAAc;UAC9C;QACF;QACAI,OAAO,CAAC4C,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACrD,eAAe,GAAGsD,CAAC,CAACtD,eAAe,CAAC;MAC/D;IACF,CAAC,CAAC;IACJuD,oBAAoB,EAAEA,CAACxC,QAAQ,EAAEyC,CAAC,KAChC7G,MAAM,CAACgF,iBAAiB,CACtBhF,MAAM,CAAC6E,IAAI,CAAC,MAAMV,YAAY,CAACC,QAAQ,CAAC,CAACK,OAAO,CAACC,KAAK,EAAE,CAAC,EACzDmC,CAAC,EACD,CAACjC,OAAO,EAAEM,IAAI,KACZlF,MAAM,CAAC6E,IAAI,CAAC,MAAK;MACf,IAAIK,IAAI,CAACE,IAAI,KAAK,SAAS,EAAE;MAC7B,MAAM0B,IAAI,GAAGlC,OAAO,CAACA,OAAO,CAAC0B,MAAM,GAAG,CAAC,CAAC;MACxC,IAAI,CAACQ,IAAI,EAAE;MACX,MAAMxC,MAAM,GAAGH,YAAY,CAACC,QAAQ,CAAC;MACrC,KAAK,IAAIiC,CAAC,GAAG/B,MAAM,CAACG,OAAO,CAAC6B,MAAM,GAAG,CAAC,EAAED,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;QACnD,IAAI/B,MAAM,CAACG,OAAO,CAAC4B,CAAC,CAAC,CAAC7D,EAAE,KAAKsE,IAAI,CAACtE,EAAE,EAAE;UACpC8B,MAAM,CAACG,OAAO,GAAGH,MAAM,CAACG,OAAO,CAACC,KAAK,CAAC2B,CAAC,GAAG,CAAC,CAAC;UAC5C;QACF;MACF;IACF,CAAC,CAAC,CACL;IACHU,kBAAkB,EAAG3C,QAAQ,IAAKpE,MAAM,CAAC6E,IAAI,CAAC,MAAMV,YAAY,CAACC,QAAQ,CAAC,CAACI,QAAQ,CAAC;IACpFwC,OAAO,EAAE9G,MAAM,CAAC+G,SAAS,CAAChD,MAAM,CAAC;IACjCiD,OAAO,EAAElH,MAAM,CAAC6E,IAAI,CAAC,MAAK;MACxBhB,OAAO,CAACyC,MAAM,GAAG,CAAC;MAClBxC,IAAI,CAACqD,KAAK,EAAE;MACZnD,OAAO,CAACmD,KAAK,EAAE;IACjB,CAAC;GACF,CAAC;AACJ,CAAC,CAAC;AAEF;;;;AAIA,OAAO,MAAMC,WAAW,gBAA8BnH,KAAK,CAAC8E,MAAM,CAAC1E,YAAY,EAAEsD,UAAU,CAAC;AAE5F;;;;AAIA,OAAO,MAAM0D,aAAa,GAAI1F,OAE7B,IACC3B,MAAM,CAAC4D,GAAG,CAAC,aAAS;EAClB,MAAM0D,QAAQ,GAAG3F,OAAO,EAAE2F,QAAQ,IAAI,sBAAsB;EAC5D,MAAMC,WAAW,GAAGC,SAAS,CAACC,IAAI,CAACH,QAAQ,EAAE,CAAC,CAAC;EAC/CC,WAAW,CAACG,eAAe,GAAG,MAAK;IACjC,MAAMC,EAAE,GAAGJ,WAAW,CAACK,MAAM;IAE7B,MAAMhD,OAAO,GAAG+C,EAAE,CAACE,iBAAiB,CAAC,SAAS,EAAE;MAAEC,OAAO,EAAE;IAAI,CAAE,CAAC;IAClElD,OAAO,CAACmD,WAAW,CAAC,IAAI,EAAE,IAAI,EAAE;MAAEC,MAAM,EAAE;IAAI,CAAE,CAAC;IACjDpD,OAAO,CAACmD,WAAW,CAAC,OAAO,EAAE,OAAO,CAAC;IAErC,MAAM/D,OAAO,GAAG2D,EAAE,CAACE,iBAAiB,CAAC,SAAS,EAAE;MAAEC,OAAO,EAAE,CAAC,UAAU,EAAE,SAAS;IAAC,CAAE,CAAC;IACrF9D,OAAO,CAAC+D,WAAW,CAAC,IAAI,EAAE,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE;MAAEC,MAAM,EAAE;IAAI,CAAE,CAAC;IACpEhE,OAAO,CAAC+D,WAAW,CAAC,UAAU,EAAE,CAAC,UAAU,EAAE,UAAU,CAAC,EAAE;MAAEC,MAAM,EAAE;IAAI,CAAE,CAAC;IAE3E,MAAMC,aAAa,GAAGN,EAAE,CAACE,iBAAiB,CAAC,eAAe,EAAE;MAAEC,OAAO,EAAE,CAAC,UAAU;IAAC,CAAE,CAAC;IACtFG,aAAa,CAACF,WAAW,CAAC,IAAI,EAAE,UAAU,EAAE;MAAEC,MAAM,EAAE;IAAI,CAAE,CAAC;EAC/D,CAAC;EACD,MAAML,EAAE,GAAG,OAAO3H,MAAM,CAACkI,cAAc,CACrCC,MAAM,CAAC,MAAM,EAAE,MAAMZ,WAAW,CAAC,EAChCI,EAAE,IAAK3H,MAAM,CAAC6E,IAAI,CAAC,MAAM8C,EAAE,CAACS,KAAK,EAAE,CAAC,CACtC;EAED,MAAMnE,MAAM,GAAG,OAAO/D,MAAM,CAACgE,SAAS,EAAS;EAE/C,OAAO7D,YAAY,CAACsE,EAAE,CAAC;IACrBC,OAAO,EAAEuD,MAAM,CACb,SAAS,EACT,MACER,EAAE,CAACU,WAAW,CAAC,SAAS,EAAE,UAAU,CAAC,CAClCC,WAAW,CAAC,SAAS,CAAC,CACtBC,KAAK,CAAC,IAAI,CAAC,CACXC,MAAM,EAAE,CACd,CAACrH,IAAI,CACJnB,MAAM,CAACyI,OAAO,CAAEC,CAAC,IACfC,mBAAmB,CAACD,CAAC,CAAC,CAACvH,IAAI,CACzBnB,MAAM,CAAC4I,QAAQ,CAAE9H,KAAK,IAAK,IAAIJ,iBAAiB,CAAC;MAAEE,MAAM,EAAE,SAAS;MAAEE;IAAK,CAAE,CAAC,CAAC,CAChF,CACF,CACF;IACDgE,KAAK,EAAEA,CAAC;MAAEC,MAAM;MAAEtC,KAAK;MAAEE,OAAO;MAAED;IAAU,CAAE,KAC5C1C,MAAM,CAAC6I,mBAAmB,CAAEC,OAAO,IAAI;MACrC,MAAMpF,KAAK,GAAG,IAAIpB,KAAK,CAAC;QACtBE,EAAE,EAAEd,WAAW,EAAE;QACjBe,KAAK;QACLC,UAAU;QACVC;OACD,EAAE;QAAEsC,iBAAiB,EAAE;MAAI,CAAE,CAAC;MAC/B,OAAO6D,OAAO,CAAC/D,MAAM,CAACrB,KAAK,CAAC,CAAC,CAACvC,IAAI,CAChCnB,MAAM,CAAC+I,OAAO,CAACZ,MAAM,CACnB,OAAO,EACP,MACER,EAAE,CACCU,WAAW,CAAC,SAAS,EAAE,WAAW,CAAC,CACnCC,WAAW,CAAC,SAAS,CAAC,CACtBU,GAAG,CAACC,cAAc,CAACvF,KAAK,CAAC,CAAC,CAChC,CAAC,EACF1D,MAAM,CAAC+I,OAAO,CAAC9E,MAAM,CAACwB,OAAO,CAAC/B,KAAK,CAAC,CAAC,CACtC;IACH,CAAC,CAAC;IACJgC,eAAe,EAAG/D,OAAO,IACvB3B,MAAM,CAAC4D,GAAG,CAAC,aAAS;MAClB,MAAMgC,WAAW,GAAiB,EAAE;MACpC,MAAMD,kBAAkB,GAAuB,EAAE;MAEjD,OAAO3F,MAAM,CAACkJ,KAAK,CAA2BC,MAAM,IAAI;QACtD,MAAMC,EAAE,GAAGzB,EAAE,CAACU,WAAW,CAAC,CAAC,SAAS,EAAE,SAAS,CAAC,EAAE,WAAW,CAAC;QAC9D,MAAMzD,OAAO,GAAGwE,EAAE,CAACd,WAAW,CAAC,SAAS,CAAC;QACzC,MAAMtE,OAAO,GAAGoF,EAAE,CAACd,WAAW,CAAC,SAAS,CAAC;QACzC,MAAMe,QAAQ,GAAG1H,OAAO,CAACiD,OAAO,CAACpE,MAAM,CAAC6I,QAAQ,CAAC,EAAE;QACnD,MAAMC,UAAU,GAAIC,KAAwC,IAAI;UAC9D,IAAIA,KAAK,CAACC,IAAI,EAAE;UAChB,MAAM3D,WAAW,GAAG0D,KAAK,CAACE,KAAK;UAC/B,MAAM/F,KAAK,GAAGmC,WAAW,CAACnC,KAAK;UAC/BkB,OAAO,CAACL,GAAG,CAACb,KAAK,CAAClB,EAAE,CAAC,CAACkH,SAAS,GAAIjH,KAAK,IAAI;YAC1C,IAAKA,KAAK,CAACkH,MAAc,CAAC/B,MAAM,EAAE;cAChC5D,OAAO,CAACgF,GAAG,CAAC;gBACV5E,QAAQ,EAAEzC,OAAO,CAACyC,QAAQ;gBAC1BtC,OAAO,EAAE+D,WAAW,CAACnC,KAAK,CAAClB,EAAE;gBAC7BgC,QAAQ,EAAEqB,WAAW,CAACpC;eACvB,CAAC;cACF6F,UAAU,CAACD,QAAQ,CAACO,IAAI,EAAE,CAAC;cAC3B;YACF;YACAhE,WAAW,CAACL,IAAI,CAAC7B,KAAK,CAAC;YACvBiC,kBAAkB,CAACJ,IAAI,CAACM,WAAW,CAAC;YACpCyD,UAAU,CAACD,QAAQ,CAACO,IAAI,EAAE,CAAC;UAC7B,CAAC;QACH,CAAC;QACDN,UAAU,CAACD,QAAQ,CAACO,IAAI,EAAE,CAAC;QAC3BR,EAAE,CAACS,UAAU,GAAG,MAAMV,MAAM,CAACnJ,MAAM,CAACsF,IAAI,CAAC;QACzC8D,EAAE,CAACU,OAAO,GAAG,MACXX,MAAM,CAACnJ,MAAM,CAAC+J,IAAI,CAAC,IAAIrJ,iBAAiB,CAAC;UAAEE,MAAM,EAAE,iBAAiB;UAAEE,KAAK,EAAEsI,EAAE,CAACY;QAAK,CAAE,CAAC,CAAC,CAAC;QAC5F,OAAOhK,MAAM,CAAC6E,IAAI,CAAC,MAAMuE,EAAE,CAACa,KAAK,EAAE,CAAC;MACtC,CAAC,CAAC;MAEF,MAAMnE,QAAQ,GAAGnE,OAAO,CAACoE,OAAO,GAC5B,OAAOpE,OAAO,CAACoE,OAAO,CAACJ,kBAAkB,CAAC,GAC1C,CAAC,CAACC,WAAW,EAAED,kBAAkB,CAAC,CAAU;MAEhD,KAAK,MAAM,CAACK,SAAS,EAAEC,aAAa,CAAC,IAAIH,QAAQ,EAAE;QACjD,KAAK,MAAMI,WAAW,IAAIF,SAAS,EAAE;UACnC,MAAMI,SAAS,GAAiB,EAAE;UAClC,OAAOpG,MAAM,CAACkJ,KAAK,CAA2BC,MAAM,IAAI;YACtD,MAAMC,EAAE,GAAGzB,EAAE,CAACU,WAAW,CAAC,SAAS,EAAE,UAAU,CAAC;YAChD,MAAMzD,OAAO,GAAGwE,EAAE,CAACd,WAAW,CAAC,SAAS,CAAC;YACzC,MAAM4B,aAAa,GAAGtF,OAAO,CAAC2D,KAAK,CAAC,IAAI,CAAC,CAAC4B,UAAU,CAClDC,WAAW,CAACC,UAAU,CAACnE,WAAW,CAAC1D,EAAE,EAAE,IAAI,CAAC,EAC5C,MAAM,CACP;YACD0H,aAAa,CAACR,SAAS,GAAG,MAAK;cAC7B,MAAMY,MAAM,GAAGJ,aAAa,CAACtC,MAAO;cACpC,IAAI,CAAC0C,MAAM,EAAE;cACb,MAAMC,YAAY,GAAGC,cAAc,CAACF,MAAM,CAACb,KAAK,CAAC;cACjD,IACEc,YAAY,CAAC9H,KAAK,KAAKyD,WAAW,CAACzD,KAAK,IACxC8H,YAAY,CAAC7H,UAAU,KAAKwD,WAAW,CAACxD,UAAU,EAClD;gBACA0D,SAAS,CAACb,IAAI,CAACgF,YAAY,CAAC;cAC9B;cACAD,MAAM,CAACG,QAAQ,EAAE;YACnB,CAAC;YACDrB,EAAE,CAACS,UAAU,GAAG,MAAMV,MAAM,CAACnJ,MAAM,CAACsF,IAAI,CAAC;YACzC8D,EAAE,CAACU,OAAO,GAAG,MACXX,MAAM,CAACnJ,MAAM,CAAC+J,IAAI,CAAC,IAAIrJ,iBAAiB,CAAC;cAAEE,MAAM,EAAE,iBAAiB;cAAEE,KAAK,EAAEsI,EAAE,CAACY;YAAK,CAAE,CAAC,CAAC,CAAC;YAC5F,OAAOhK,MAAM,CAAC6E,IAAI,CAAC,MAAMuE,EAAE,CAACa,KAAK,EAAE,CAAC;UACtC,CAAC,CAAC;UAEF,OAAOtI,OAAO,CAACoD,MAAM,CAAC;YAAErB,KAAK,EAAEwC,WAAW;YAAEE;UAAS,CAAE,CAAC;QAC1D;QAEA,OAAOpG,MAAM,CAACkJ,KAAK,CAA2BC,MAAM,IAAI;UACtD,MAAMC,EAAE,GAAGzB,EAAE,CAACU,WAAW,CAAC,CAAC,SAAS,EAAE,SAAS,CAAC,EAAE,WAAW,CAAC;UAC9D,MAAMzD,OAAO,GAAGwE,EAAE,CAACd,WAAW,CAAC,SAAS,CAAC;UACzC,MAAMtE,OAAO,GAAGoF,EAAE,CAACd,WAAW,CAAC,SAAS,CAAC;UACzC,KAAK,MAAMzC,WAAW,IAAII,aAAa,EAAE;YACvCrB,OAAO,CAAC8F,GAAG,CAACzB,cAAc,CAACpD,WAAW,CAACnC,KAAK,CAAC,CAAC;YAC9CM,OAAO,CAACgF,GAAG,CAAC;cACV5E,QAAQ,EAAEzC,OAAO,CAACyC,QAAQ;cAC1BtC,OAAO,EAAE+D,WAAW,CAACnC,KAAK,CAAClB,EAAE;cAC7BgC,QAAQ,EAAEqB,WAAW,CAACpC;aACvB,CAAC;UACJ;UACA2F,EAAE,CAACS,UAAU,GAAG,MAAMV,MAAM,CAACnJ,MAAM,CAACsF,IAAI,CAAC;UACzC8D,EAAE,CAACU,OAAO,GAAG,MACXX,MAAM,CAACnJ,MAAM,CAAC+J,IAAI,CAAC,IAAIrJ,iBAAiB,CAAC;YAAEE,MAAM,EAAE,iBAAiB;YAAEE,KAAK,EAAEsI,EAAE,CAACY;UAAK,CAAE,CAAC,CAAC,CAAC;UAC5F,OAAOhK,MAAM,CAAC6E,IAAI,CAAC,MAAMuE,EAAE,CAACa,KAAK,EAAE,CAAC;QACtC,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IACJrD,oBAAoB,EAAEA,CAACxC,QAAQ,EAAEyC,CAAC,KAChC7G,MAAM,CAACkJ,KAAK,CAAmCC,MAAM,IAAI;MACvD,MAAMvE,OAAO,GAAiB,EAAE;MAChC,MAAMwE,EAAE,GAAGzB,EAAE,CAACU,WAAW,CAAC,CAAC,SAAS,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,WAAW,CAAC;MAE/E,MAAMsC,YAAY,GAAGvB,EAAE,CAACd,WAAW,CAAC,SAAS,CAAC;MAC9C,MAAMsC,YAAY,GAAGxB,EAAE,CAACd,WAAW,CAAC,SAAS,CAAC;MAC9C,MAAMuC,kBAAkB,GAAGzB,EAAE,CAACd,WAAW,CAAC,eAAe,CAAC;MAE1DuC,kBAAkB,CAACtG,GAAG,CAACH,QAAQ,CAAC,CAACsF,SAAS,GAAIjH,KAAK,IAAI;QACrD,MAAMqI,YAAY,GAAIrI,KAAK,CAACkH,MAAc,CAAC/B,MAAM,EAAE9F,OAAO;QAC1D,MAAMiJ,WAAW,GAAGJ,YAAY,CAACpC,KAAK,CAAC,IAAI,CAAC,CAAC4B,UAAU,CACrDW,YAAY,GAAGV,WAAW,CAACC,UAAU,CAACS,YAAY,EAAE,IAAI,CAAC,GAAG,IAAI,EAChE,MAAM,CACP;QACDC,WAAW,CAACrB,SAAS,GAAG,MAAK;UAC3B,MAAMY,MAAM,GAAGS,WAAW,CAACnD,MAAM;UACjC,IAAI,CAAC0C,MAAM,EAAE;UACb,MAAM5G,KAAK,GAAG8G,cAAc,CAACF,MAAM,CAACb,KAAK,CAAC;UAC1CmB,YAAY,CAACrG,GAAG,CAAC,CAACH,QAAQ,EAAEV,KAAK,CAAClB,EAAE,CAAC,CAAC,CAACkH,SAAS,GAAIjH,KAAK,IAAI;YAC3D,IAAI,CAAEA,KAAK,CAACkH,MAAc,CAAC/B,MAAM,EAAEhD,OAAO,CAACW,IAAI,CAAC7B,KAAK,CAAC;YACtD4G,MAAM,CAACG,QAAQ,EAAE;UACnB,CAAC;QACH,CAAC;MACH,CAAC;MAEDrB,EAAE,CAACS,UAAU,GAAG,MAAMV,MAAM,CAACnJ,MAAM,CAACgL,OAAO,CAACpG,OAAO,CAAC,CAAC;MACrDwE,EAAE,CAACU,OAAO,GAAG,MACXX,MAAM,CAACnJ,MAAM,CAAC+J,IAAI,CAAC,IAAIrJ,iBAAiB,CAAC;QAAEE,MAAM,EAAE,sBAAsB;QAAEE,KAAK,EAAEsI,EAAE,CAACY;MAAK,CAAE,CAAC,CAAC,CAAC;MACjG,OAAOhK,MAAM,CAAC6E,IAAI,CAAC,MAAMuE,EAAE,CAACa,KAAK,EAAE,CAAC;IACtC,CAAC,CAAC,CAAC9I,IAAI,CACLnB,MAAM,CAACyI,OAAO,CAAE7D,OAAO,IAAI;MACzB,IAAIA,OAAO,CAAC0B,MAAM,KAAK,CAAC,EAAE,OAAOO,CAAC,CAACjC,OAAO,CAAC;MAC3C,MAAM9C,OAAO,GAAG8C,OAAO,CAACA,OAAO,CAAC0B,MAAM,GAAG,CAAC,CAAC,CAAC9D,EAAE;MAC9C,OAAOxC,MAAM,CAAC6I,mBAAmB,CAAEC,OAAO,IACxCA,OAAO,CAACjC,CAAC,CAACjC,OAAO,CAAC,CAAC,CAACzD,IAAI,CACtBnB,MAAM,CAAC+I,OAAO,CAACZ,MAAM,CAAC,sBAAsB,EAAE,MAC5CR,EAAE,CAACU,WAAW,CAAC,eAAe,EAAE,WAAW,CAAC,CAACC,WAAW,CAAC,eAAe,CAAC,CAACU,GAAG,CAAC;QAC5E5E,QAAQ;QACRtC;OACD,CAAC,CAAC,CAAC,CACP,CACF;IACH,CAAC,CAAC,CACH;IACHiF,kBAAkB,EAAG3C,QAAQ,IAC3BpE,MAAM,CAACkJ,KAAK,CAA6BC,MAAM,IAAI;MACjD,MAAMC,EAAE,GAAGzB,EAAE,CAACU,WAAW,CAAC,SAAS,EAAE,UAAU,CAAC;MAChD,IAAI7D,QAAQ,GAAG,CAAC;MAChB,MAAM0F,aAAa,GAAGd,EAAE,CAACd,WAAW,CAAC,SAAS,CAAC,CAACC,KAAK,CAAC,UAAU,CAAC,CAAC4B,UAAU,CAC1EC,WAAW,CAACa,KAAK,CAAC,CAAC7G,QAAQ,EAAE,CAAC,CAAC,EAAE,CAACA,QAAQ,EAAE8G,QAAQ,CAAC,CAAC,EACtD,MAAM,CACP;MACDhB,aAAa,CAACR,SAAS,GAAG,MAAK;QAC7B,MAAMY,MAAM,GAAGJ,aAAa,CAACtC,MAAM;QACnC,IAAI,CAAC0C,MAAM,EAAE;QACb9F,QAAQ,GAAG8F,MAAM,CAACb,KAAK,CAACjF,QAAQ,GAAG,CAAC;MACtC,CAAC;MACD4E,EAAE,CAACS,UAAU,GAAG,MAAMV,MAAM,CAACnJ,MAAM,CAACgL,OAAO,CAACxG,QAAQ,CAAC,CAAC;MACtD4E,EAAE,CAACU,OAAO,GAAG,MACXX,MAAM,CAACnJ,MAAM,CAAC+J,IAAI,CAAC,IAAIrJ,iBAAiB,CAAC;QAAEE,MAAM,EAAE,oBAAoB;QAAEE,KAAK,EAAEsI,EAAE,CAACY;MAAK,CAAE,CAAC,CAAC,CAAC;MAC/F,OAAOhK,MAAM,CAAC6E,IAAI,CAAC,MAAMuE,EAAE,CAACa,KAAK,EAAE,CAAC;IACtC,CAAC,CAAC;IACJjD,OAAO,EAAE9G,MAAM,CAAC+G,SAAS,CAAChD,MAAM,CAAC;IACjCiD,OAAO,EAAElH,MAAM,CAAC6E,IAAI,CAAC,MAAK;MACxB2C,SAAS,CAAC2D,cAAc,CAAC7D,QAAQ,CAAC;IACpC,CAAC;GACF,CAAC;AACJ,CAAC,CAAC;AAEJ,MAAMkD,cAAc,gBAAGrK,MAAM,CAACiL,UAAU,CAAC9I,KAAK,CAAC;AAC/C,MAAM2G,cAAc,gBAAG9I,MAAM,CAACkL,UAAU,CAAC/I,KAAK,CAAC;AAC/C,MAAMgJ,aAAa,gBAAGnL,MAAM,CAAC0C,KAAK,CAACP,KAAK,CAAC;AACzC,MAAMqG,mBAAmB,gBAAGxI,MAAM,CAACoL,aAAa,CAACD,aAAa,CAAC;AAE/D;;;;AAIA,OAAO,MAAME,cAAc,GAAI7J,OAE9B,IACC1B,KAAK,CAACwL,MAAM,CACVpL,YAAY,EACZgH,aAAa,CAAC1F,OAAO,CAAC,CACvB;AAEH,MAAMwG,MAAM,GAAGA,CAAIvH,MAAc,EAAE8K,QAA6B,KAC9D1L,MAAM,CAACkJ,KAAK,CAAwBC,MAAM,IAAI;EAC5C,MAAMwC,OAAO,GAAGD,QAAQ,EAAE;EAC1B,IAAIC,OAAO,CAACC,UAAU,KAAK,MAAM,EAAE;IACjCzC,MAAM,CAACnJ,MAAM,CAACgL,OAAO,CAACW,OAAO,CAAC/D,MAAM,CAAC,CAAC;IACtC;EACF;EACA+D,OAAO,CAACjC,SAAS,GAAG,MAAMP,MAAM,CAACnJ,MAAM,CAACgL,OAAO,CAACW,OAAO,CAAC/D,MAAM,CAAC,CAAC;EAChE+D,OAAO,CAAC7B,OAAO,GAAG,MAAMX,MAAM,CAACnJ,MAAM,CAAC+J,IAAI,CAAC,IAAIrJ,iBAAiB,CAAC;IAAEE,MAAM;IAAEE,KAAK,EAAE6K,OAAO,CAAC3B;EAAK,CAAE,CAAC,CAAC,CAAC;AACtG,CAAC,CAAC","ignoreList":[]}