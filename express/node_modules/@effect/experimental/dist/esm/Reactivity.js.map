{"version":3,"file":"Reactivity.js","names":["Context","Effect","Exit","FiberHandle","Hash","Layer","Mailbox","Scope","Stream","Reactivity","Tag","make","sync","handlers","Map","unsafeInvalidate","keys","Array","isArray","i","length","set","get","stringOrHash","undefined","run","record","key","hashes","idHashes","invalidate","mutation","effect","ensuring","query","gen","resolvedKeys","map","recordHashes","scope","results","runFork","makeRuntime","running","pending","handleExit","exit","_tag","unsafeDone","failCause","cause","unsafeOffer","value","addObserver","addFinalizer","delete","size","Set","add","stream","tables","pipe","toStream","unwrapScoped","of","layer","scoped","u","hash","keyHash","ids","push","idHash"],"sources":["../../src/Reactivity.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}