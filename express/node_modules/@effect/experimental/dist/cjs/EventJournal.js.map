{"version":3,"file":"EventJournal.js","names":["MsgPack","_interopRequireWildcard","require","Context","DateTime","Effect","Layer","PubSub","Schema","Uuid","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","EventJournal","Tag","exports","ErrorTypeId","Symbol","for","EventJournalError","TaggedClass","method","String","cause","Defect","RemoteIdTypeId","RemoteId","Uint8ArrayFromSelf","pipe","brand","makeRemoteId","v4","Uint8Array","EntryIdTypeId","EntryId","makeEntryId","options","v7","entryIdMillis","entryId","bytes","subarray","Number","DataView","buffer","getBigUint64","Entry","Class","id","event","primaryKey","payload","arrayMsgPack","Array","schema","encodeArray","encode","decodeArray","decode","idString","stringify","createdAtMillis","createdAt","unsafeMake","RemoteEntry","remoteSequence","entry","makeMemory","gen","journal","byId","Map","remotes","pubsub","unbounded","ensureRemote","remoteId","remoteIdString","remote","sequence","missing","slice","of","entries","sync","write","effect","acquireUseRelease","disableValidation","exit","suspend","_tag","void","push","forEach","publish","writeFromRemote","uncommittedRemotes","uncommitted","remoteEntry","brackets","compact","compacted","remoteEntries","originEntry","entryMillis","conflicts","length","undefined","j","sort","a","b","withRemoteUncommited","last","nextRemoteSequence","changes","subscribe","destroy","clear","layerMemory","makeIndexedDb","database","openRequest","indexedDB","open","onupgradeneeded","db","result","createObjectStore","keyPath","createIndex","unique","remoteEntryId","acquireRelease","idbReq","close","transaction","objectStore","index","getAll","flatMap","_","decodeEntryIdbArray","mapError","uninterruptibleMask","restore","zipLeft","put","encodeEntryIdb","async","resume","tx","iterator","handleNext","state","done","value","onsuccess","target","next","oncomplete","onerror","fail","error","abort","cursorRequest","openCursor","IDBKeyRange","lowerBound","cursor","decodedEntry","decodeEntryIdb","continue","add","entriesStore","remotesStore","remoteEntryIdStore","startEntryId","entryCursor","succeed","bound","Infinity","deleteDatabase","decodeSync","encodeSync","EntryIdbArray","decodeUnknown","layerIndexedDb","scoped","evaluate","request","readyState"],"sources":["../../src/EventJournal.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}