{"version":3,"file":"EventLogRemote.js","names":["MsgPack","_interopRequireWildcard","require","Socket","Deferred","Effect","Exit","Layer","Mailbox","RcMap","Schedule","Schema","Scope","_EventJournal","_EventLog","_EventLogEncryption","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","Hello","TaggedClass","remoteId","RemoteId","exports","ChunkedMessage","id","Number","part","Tuple","data","Uint8ArrayFromSelf","split","parts","Math","ceil","byteLength","constChunkSize","result","Array","start","end","min","subarray","join","map","index","total","entry","count","bytes","Uint8Array","offset","delete","WriteEntries","publicKey","String","iv","encryptedEntries","EncryptedEntry","Ack","sequenceNumbers","RequestChanges","startSequence","Changes","entries","EncryptedRemoteEntry","StopChanges","Ping","Pong","ProtocolRequest","Union","ProtocolRequestMsgPack","schema","decodeRequest","decodeSync","encodeRequest","encodeSync","ProtocolResponse","ProtocolResponseMsgPack","decodeResponse","encodeResponse","RemoteAdditions","RemoteEntry","fromSocket","options","gen","log","EventLog","socket","encryption","EventLogEncryption","scope","writeRaw","writer","writeGen","request","_tag","write","pendingCounter","pending","Map","chunks","subscriptions","make","lookup","acquireRelease","mailbox","zipRight","shutdown","ignoreLogged","identities","badPing","latestPing","latestPong","disablePing","suspend","fail","Error","pipe","delay","forever","fork","interruptible","handleMessage","res","registerRemote","identity","encrypted","encrypt","deferred","orDie","encryptedEntry","entryId","await","changes","extend","remoteEntries","sequenceNumber","remoteSequence","offerAll","done","void","decrypt","scoped","run","raceFirst","tapErrorCause","logDebug","retry","schedule","exponential","union","spaced","annotateLogs","service","method","forkScoped","fromWebSocket","url","makeWebSocket","provideService","layerWebSocket","scopedDiscard","layerWebSocketBrowser","provide","layerSubtle","layerWebSocketConstructorGlobal"],"sources":["../../src/EventLogRemote.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}